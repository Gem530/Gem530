import{Q as e,i as a,R as t,N as l,P as s,S as o,T as r}from"./element-plus.1a8f7ccb.js";import{_ as i}from"./index.7ae2f1d9.js";import{h as n}from"./index.f5ed39b5.js";import{k as u,d,K as p,e as f,n as m,o as c,T as g,U as v,I as y,a as h,W as b,a8 as k,Y as _,a9 as z,a7 as w,al as x,am as S,Q as C,J as P,u as $,j as N,c as j,R as L,F as T}from"./@vue.df4a0536.js";const U={class:"dialog-footer"},V=u({__name:"index",props:{rules:{default:{}},show:{type:Boolean,default:!1},title:{default:"新增"},formList:{default:()=>[]},cancelName:{default:"取消"},confirmName:{default:"确认"}},emits:["update:show","confirm"],setup(t,{expose:l,emit:s}){const o=t,r=d(),u=p(),N=d(o.title),j=d(o.formList.filter((e=>-1!==["slot","form-slot"].indexOf(e.type))));f((()=>o.show),(e=>{m((()=>{e&&r.value.clearValidte()}))}));const L=()=>{s("update:show",!1)},T=()=>{r.value.searchHandle()},V=e=>{s("confirm",e)};return l({close:L,initModalData:(e,a)=>{setTimeout((()=>{a&&(N.value=a),e&&r.value.initData(n(e))}),0)}}),(t,l)=>{const s=i,n=a,d=e;return c(),g(d,P($(u),{title:N.value,"model-value":o.show,onClosed:L}),{footer:v((()=>[y(t.$slots,"dialog-footer",{},(()=>[h("span",U,[b(n,{onClick:L},{default:v((()=>[k(_(o.cancelName),1)])),_:1}),b(n,{type:"primary",onClick:T},{default:v((()=>[k(_(o.confirmName),1)])),_:1})])]))])),default:v((()=>[y(t.$slots,"dialog-content",{},(()=>[o.show?(c(),g(s,{key:0,ref_key:"GFormRef",ref:r,"label-width":"100px",rules:o.rules,formList:o.formList,onSearch:V},z({_:2},[w(j.value,((e,a)=>({name:e.prop,fn:v((a=>[y(t.$slots,e.prop,x(S({...a})))]))})))]),1032,["rules","formList"])):C("",!0)]))])),_:3},16,["title","model-value"])}}}),J=k("隐藏表格"),O=u({__name:"index",props:{data:{default:()=>[]},page:{default:1},total:{default:0},columns:{default:()=>[]},layout:{default:"total, sizes, prev, pager, next, jumper"},pageSize:{default:10},hidePage:{type:Boolean,default:!1},pageSizes:{default:()=>[10,20,30,40,50]},transferProps:{default:()=>({key:"type",label:"label",disabled:"disabled"})}},emits:["update:page","update:pageSize","pagination","selectionChange"],setup(e,{expose:i,emit:n}){const u=e,f=p();let m;const h=d(JSON.parse(JSON.stringify(u.columns)));for(let a=0;a<h.value.length-1;a++)for(let e=0;e<h.value.length-1;e++)h.value[e].sort>h.value[e+1].sort&&(m=h.value[e],h.value[e]=h.value[e+1],h.value[e+1]=m);const x=d(h.value.filter((e=>e.label&&!e.visible)).map((e=>{var a;return e[null==(a=u.transferProps)?void 0:a.key]}))),S=N({get:()=>u.page,set(e){n("update:page",e)}}),U=N({get:()=>u.pageSize,set(e){n("update:pageSize",e)}}),V=(e,a)=>a.label.includes(e),O=(e,a)=>{a=Array.isArray(a)?a:[a],h.value.forEach((t=>{var l;a.includes(t[null==(l=u.transferProps)?void 0:l.key])&&(t.visible=e)}))},R=(e,a,t)=>{O("left"===a,t)},A=e=>{n("selectionChange",e)},B=e=>{n("pagination",e)},D=e=>{n("pagination",e)};return i({hideTable:O}),(i,n)=>{const d=a,p=t,m=l,N=s,O=o,F=r;return c(),j("div",null,[b(m,{placement:"bottom-start",width:600,trigger:"click"},{reference:v((()=>[b(d,{style:{"margin-right":"16px"}},{default:v((()=>[J])),_:1})])),default:v((()=>[b(p,{filterable:"",modelValue:x.value,"onUpdate:modelValue":n[0]||(n[0]=e=>x.value=e),props:u.transferProps,titles:["显示列","隐藏列"],"filter-method":V,"filter-placeholder":"请输入标题",data:h.value.filter((e=>e.label)),"right-default-checked":h.value.filter((e=>e.label&&!e.visible)),onChange:R},null,8,["modelValue","props","data","right-default-checked"])])),_:1}),b(O,P($(f),{data:u.data,style:{width:"100%"},onSelectionChange:A}),{default:v((()=>[(c(!0),j(L,null,w(h.value,((e,a)=>{var t,l;return c(),j(L,{key:a},[e.slot&&e.visible?y(i.$slots,`table-column-${e.slot}`,{key:0}):e.visible?(c(),j(L,{key:1},[e.hide?C("",!0):(c(),g(N,P({key:0,key:a,prop:e.type,label:e.label},{...e.attrs}),z({_:2},["selection"!=(null==(t=e.attrs)?void 0:t.type)?{name:"header",fn:v((()=>[y(i.$slots,`header-${e.type}`,{},(()=>[k(_(e.label),1)]))])),key:"0"}:void 0,"selection"!=(null==(l=e.attrs)?void 0:l.type)?{name:"default",fn:v((a=>[y(i.$slots,`column-${e.type}`,{row:a.row},(()=>[k(_(a.row[e.type]),1)]))])),key:"1"}:void 0]),1040,["prop","label"]))],64)):C("",!0)],64)})),128))])),_:3},16,["data"]),e.hidePage?C("",!0):(c(),g(F,{key:0,total:e.total,layout:u.layout,style:{"margin-top":"10px"},currentPage:$(S),"onUpdate:currentPage":n[1]||(n[1]=e=>T(S)?S.value=e:null),"page-size":$(U),"onUpdate:page-size":n[2]||(n[2]=e=>T(U)?U.value=e:null),"page-sizes":u.pageSizes,onSizeChange:B,onCurrentChange:D},null,8,["total","layout","currentPage","page-size","page-sizes"]))])}}});export{O as _,V as a};

import{_ as e,a}from"./index.vue_vue_type_script_setup_true_name_g-table_lang.ff194d02.js";import{P as t,i as s}from"./element-plus.1a8f7ccb.js";import{_ as r}from"./index.7ae2f1d9.js";import{s as o,d as l}from"./other.8097608d.js";import{k as i,d as p,$ as d,f as m,o as n,c,W as g,U as u,a8 as b,Y as f,a as h,g as y}from"./@vue.df4a0536.js";import"./index.f5ed39b5.js";import"./pinia.447e158a.js";import"./vue-router.3b0bf160.js";import"./@vueuse.ca8459fe.js";import"./@element-plus.5fd8ebeb.js";import"./nprogress.058bccf8.js";import"./axios.68af02ab.js";import"./pako.fc44881c.js";import"./mitt.550594b0.js";import"./ws.f1fd17a3.js";import"./lodash-es.503fa2cd.js";import"./dayjs.6e4093f3.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./index.vue_vue_type_script_setup_true_name_wang-editor_lang.6813ac8c.js";import"./base.cc75b0f9.js";import"./index.b0f22997.js";import"./@wangeditor.6de03d2f.js";import"./index.2157c526.js";const v=h("h2",null,"表格",-1),j=b("删除"),_=b("编辑"),w=i({__name:"index",setup(i){const h=p(),w=p(),x=p(),{proxy:L}=y(),k=p([]),I=[{visible:!0,sort:1,attrs:{align:"center",type:"selection"}},{visible:!0,sort:2,attrs:{align:"center",width:""},type:"operId",label:"日志编号"},{visible:!0,sort:3,attrs:{align:"center",width:""},type:"title",label:"系统模块"},{visible:!0,sort:4,attrs:{align:"center",width:""},type:"businessType",label:"操作类型"},{visible:!0,sort:5,attrs:{align:"center",width:""},type:"requestMethod",label:"请求方式"},{visible:!0,sort:6,attrs:{align:"center",width:""},type:"operName",label:"操作人员"},{visible:!1,sort:6,attrs:{align:"center",width:""},type:"operIp",label:"操作地址"},{visible:!0,sort:9,attrs:{align:"center",width:""},type:"status",label:"操作状态"},{visible:!0,sort:8,attrs:{align:"center",width:"",sortable:!0},type:"operTime",label:"操作日期"},{visible:!0,sort:8,slot:"make"}],$=p(0),D=d({rules:{},show:!1,formList:[{col:8,value:"",type:"input",prop:"title",label:"系统模块",attrs:{type:"text",clearable:!0,placeholder:"请输入系统模块",onkeyup:e=>S(e)}},{col:8,value:"",type:"input",prop:"operName",label:"操作人员",attrs:{type:"text",clearable:!0,placeholder:"请输入操作人员",onkeyup:e=>S(e)}},{col:8,label:"状态",type:"select",prop:"status",value:void 0,attrs:{clearable:!0,placeholder:"操作状态",onChange:()=>z()},data:[{label:"正常",value:0},{label:"异常",value:1}]},{col:8,type:"date",label:"操作时间",prop:"datetime",attrs:{type:"daterange",clearable:!0,rangeSeparator:"-",endPlaceholder:"结束时间",startPlaceholder:"开始时间",onChange:()=>z()}},{col:8,type:"btn",btn:{search:!0,searchName:"搜索",reset:!0,resetName:"重置"}}],formData:{pageSize:10,pageIndex:1,title:void 0,status:void 0,endTime:void 0,operName:void 0,startTime:void 0},oprtIdList:[],dialogRules:{operId:[{required:!0,message:"请输入日志编号",trigger:"blur"}]},dialogFormList:[{value:"11",type:"input",prop:"operId",label:"日志编号",attrs:{type:"text",clearable:!0}},{value:"22",type:"input",prop:"title",label:"系统模块",attrs:{type:"text",clearable:!0}}]}),S=e=>{13===e.keyCode&&z()},z=()=>{w.value.searchHandle()},C=e=>{D.formData={pageSize:10,pageIndex:1,title:e.title,status:e.status,operName:e.operName,endTime:e.endDateRange,startTime:e.startDateRange},N()},N=()=>{L.$modal.loading(),o(D.formData).then((e=>{L.$modal.closeLoading(),200===e.code?($.value=e.data.total,k.value=e.data.rows||[]):L.$modal.message({type:"error",message:e.msg})})).catch((e=>{L.$modal.closeLoading(),L.$modal.message({type:"error",message:e.message})}))};N();const R=()=>{D.oprtIdList.length?(L.$modal.loading(),l(D.oprtIdList.join(",")).then((e=>{L.$modal.closeLoading(),200===e.code?(L.$modal.message({type:"success",message:"删除成功"}),N()):L.$modal.message({type:"error",message:e.msg})})).catch((e=>{L.$modal.closeLoading(),L.$modal.message({type:"error",message:e.message})}))):L.$modal.message({type:"error",message:"请选择删除的日志"})},T=e=>{D.oprtIdList=e.map((e=>e.operId))},F=e=>{D.show=!1};return m((()=>{})),(o,l)=>{const i=s,p=r,d=t,m=e,y=a;return n(),c("div",null,[v,g(p,{ref_key:"GFormRef",ref:w,"label-width":"100px",rules:D.rules,formList:D.formList,onSearch:C},{"make-btn":u((()=>[g(i,{onClick:R,type:"primary"},{default:u((()=>[j])),_:1})])),_:1},8,["rules","formList"]),g(m,{ref_key:"tableRef",ref:h,total:$.value,data:k.value,columns:I,page:D.formData.pageIndex,"onUpdate:page":l[0]||(l[0]=e=>D.formData.pageIndex=e),pageSize:D.formData.pageSize,"onUpdate:pageSize":l[1]||(l[1]=e=>D.formData.pageSize=e),onPagination:N,onSelectionChange:T},{"column-status":u((e=>[b(f(0==e.row.status?"正常":"异常"),1)])),"table-column-make":u((()=>[g(d,{fixed:"right",label:"操作",align:"center"},{default:u((e=>[g(i,{onClick:a=>{return t=e.row,x.value.initModalData(t,"编辑"),void(D.show=!0);var t}},{default:u((()=>[_])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["total","data","page","pageSize"]),g(y,{title:"编辑",ref_key:"modalFormRef",ref:x,show:D.show,"onUpdate:show":l[2]||(l[2]=e=>D.show=e),rules:D.dialogRules,formList:D.dialogFormList,onConfirm:F},null,8,["show","rules","formList"])])}}});export{w as default};

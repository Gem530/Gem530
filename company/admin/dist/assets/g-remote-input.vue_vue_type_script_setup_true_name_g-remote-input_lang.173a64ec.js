import{J as e,K as a}from"./element-plus.1a8f7ccb.js";import{b as s}from"./base.cc75b0f9.js";import{k as o,K as t,j as l,d as r,o as m,T as u,J as d,u as n,F as p,g}from"./@vue.df4a0536.js";const c=o({__name:"g-remote-select",props:{modelValue:{default:void 0},req:null},emits:["update:modelValue","change"],setup(a,{emit:o}){const c=a,i=t(),{proxy:h}=g(),v=l({get:()=>c.modelValue,set(e){o("update:modelValue",e)}}),q=r([]),V=r(!1),f=e=>{e||(q.value=[]);const a={phoneNum:e,pageIndex:1,pageSize:10},o=c.req.params?Object.assign(c.req.params,a):void 0,t={data:c.req.data?Object.assign(c.req.data,a):void 0,params:o,url:c.req.url,method:c.req.method};V.value=!0,s(t).then((e=>{V.value=!1,200===e.code?(q.value=e.data.rows||[],q.value.forEach((e=>{e.label=e.phoneNum,e.value=e.phoneNum}))):h.$modal.message({message:e.msg,type:"error"})})).catch((e=>{V.value=!1,h.$modal.message({message:e.message,type:"error"})}))},b=e=>{const a=q.value.find((a=>a.id===e));o("change",a)};return(a,s)=>{const o=e;return m(),u(o,d({remote:""},n(i),{filterable:"",modelValue:n(v),"onUpdate:modelValue":s[0]||(s[0]=e=>p(v)?v.value=e:null),options:q.value,loading:V.value,style:{width:"240px"},"remote-method":f,onChange:b}),null,16,["modelValue","options","loading"])}}}),i=o({__name:"g-remote-input",props:{modelValue:{default:void 0},req:null},emits:["update:modelValue","change"],setup(e,{emit:o}){const r=e,c=t(),{proxy:i}=g(),h=l({get:()=>r.modelValue,set(e){o("update:modelValue",e)}}),v=(e,a)=>{const o={phoneNum:e,pageIndex:1,pageSize:10},t=r.req.params?Object.assign(r.req.params,o):void 0,l={data:r.req.data?Object.assign(r.req.data,o):void 0,params:t,url:r.req.url,method:r.req.method};s(l).then((e=>{200===e.code?a(e.data.rows||[]):i.$modal.message({message:e.msg,type:"error"})})).catch((e=>{i.$modal.message({message:e.message,type:"error"})}))},q=e=>{o("change",e)};return(e,s)=>{const o=a;return m(),u(o,d(n(c),{modelValue:n(h),"onUpdate:modelValue":s[0]||(s[0]=e=>p(h)?h.value=e:null),"fetch-suggestions":v,onSelect:q}),null,16,["modelValue"])}}});export{i as _,c as a};

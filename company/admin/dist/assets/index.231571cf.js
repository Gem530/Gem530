var e=Object.defineProperty,t=(t,a,i)=>(((t,a,i)=>{a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i})(t,"symbol"!=typeof a?a+"":a,i),i);import{k as a,d as i,o as l,c as n,O as o,P as s,a as r,Z as u,Y as c,Q as h,f as d,$ as g,e as m,R as p,a7 as v,S as f,ay as w,az as b,u as y,aj as x,X as k,I as C,a8 as _,n as P,j as I,E as T,a6 as M,W as S,aw as D,U as j,T as R}from"./@vue.df4a0536.js";import{m as Y,_ as X,t as B,r as A}from"./index.f5ed39b5.js";import{t as L}from"./table.5f1c0de7.js";import{f as E}from"./fabric.b7470343.js";import{i as W,a as U,b as O}from"./element-plus.1a8f7ccb.js";import{Q as F}from"./qrcode.vue.4fe700d5.js";import"./pinia.447e158a.js";import"./vue-router.3b0bf160.js";import"./@vueuse.ca8459fe.js";import"./@element-plus.5fd8ebeb.js";import"./nprogress.058bccf8.js";import"./axios.68af02ab.js";import"./pako.fc44881c.js";import"./mitt.550594b0.js";import"./ws.f1fd17a3.js";import"./lodash-es.503fa2cd.js";import"./dayjs.6e4093f3.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./base.cc75b0f9.js";import"./index.b0f22997.js";const $={key:0,class:"g-loading"},H={key:1,class:"g-paused"},N={key:2,class:"g-progress"},G={class:"g-progress-time"},z=X(a({__name:"index",props:{url:null,width:{default:"300px"},height:{default:"300px"}},setup(e){const t=e;let a,d,g;const m=i(0),p=i(0),v=i(0),f=i(0),w=i();i();const b=i(0),y=i(0),x=i(),k=i(!0);i(!0);const C=i(0);Y((()=>{_()}));const _=()=>{m.value=x.value.clientWidth,p.value=x.value.clientHeight,g=w.value,a=g.getContext("2d"),d=document.createElement("video"),d.src=t.url,g.width=m.value,g.height=p.value,d.addEventListener("canplay",(function(e){const t=e.target.videoWidth,a=e.target.videoHeight;if(t>g.width||a>g.height){const e=g.width/g.height,i=t/a;e<=1&&i<=1||e>=1&&i>=1?e<=i?p.value=m.value*a/t:m.value=t*p.value/a:e<=1&&i>=1?p.value=m.value*a/t:e>=1&&i<=1?m.value=t*p.value/a:p.value=m.value*a/t}else t>a?p.value=m.value*a/t:m.value=t*p.value/a;v.value=(g.width-m.value)/2,f.value=(g.height-p.value)/2,b.value=d.duration,S(),M()}))},P=e=>e<10?"0"+e:e,I=e=>{let t=P(parseInt(e/3600+"")),a=P(parseInt(e%3600/60+"")),i=P(parseInt(e%60+""));return e>3600?`${t}:${a}:${i}`:`${a}:${i}`},T=()=>{(d||g)&&(1===C.value?(d.pause(),C.value=0):(d.play(),C.value=1,S()))},M=()=>{const e=document.createElement("video");e.src=t.url,e.currentTime=10,e.addEventListener("canplay",(function(t){a.drawImage(e,v.value,f.value,m.value,p.value),k.value=!1}))},S=()=>{a.clearRect(0,0,g.width,g.height),a.drawImage(d,v.value,f.value,m.value,p.value),y.value=d.currentTime,d.playbackRate=1,1===C.value&&requestAnimationFrame(S)};return(e,a)=>(l(),n("div",{ref_key:"videoPlay",ref:x,class:"g-video-play",style:u({width:t.width,height:t.height}),onClick:T},[k.value?(l(),n("div",$,"加载中...")):o((l(),n("div",H,null,512)),[[s,0===C.value]]),b.value?(l(),n("div",N,[r("div",{class:"g-progress-bar",style:u({width:y.value/b.value*100+"%"})},null,4),r("div",G,c(I(y.value)+"/"+I(b.value)),1)])):h("",!0),r("canvas",{ref_key:"myCanvas",ref:w},null,512)],4))}}),[["__scopeId","data-v-738049f9"]]),q=["src"],J=X(a({__name:"index",props:{url:{default:""},width:{default:"300px"},height:{default:"300px"},maxArea:{default:30}},emits:["getResult"],setup(e,{emit:t}){const a=e,o=i(),s=i();let c=i(!0);navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?c.value=!0:c.value=!1,d((()=>{"complete"===s.value.readyState?h():s.value.onload=function(){h()}}));const h=()=>{const e=document.createElement("canvas");e.width=s.value.width,e.height=s.value.height,e.style.position="absolute",e.style.zIndex=2,e.style.left="0px",e.style.top="0px",s.value.parentNode.insertBefore(e,s.value);let i=e.getContext("2d");i.fillStyle="#bbb",i.fillRect(0,0,s.value.width,s.value.height),i.globalCompositeOperation="destination-out",i.strokeStyle="#eee",i.lineWidth=30,i.lineCap="round",c.value?e.ontouchstart=function(t){const a=o.value.getBoundingClientRect().top,n=o.value.getBoundingClientRect().left;let s=t.touches[0].pageX-e.offsetLeft-n,r=t.touches[0].pageY-e.offsetTop-a;i.beginPath(),i.arc(s,r,15,0,6.3,!1),i.fill(),e.ontouchmove=function(t){(t=t||window.event).preventDefault(),i.beginPath(),i.moveTo(s,r),i.lineTo(t.touches[0].pageX-e.offsetLeft-n,t.touches[0].pageY-e.offsetTop-a),s=t.touches[0].pageX-e.offsetLeft-n,r=t.touches[0].pageY-e.offsetTop-a,i.stroke()},document.ontouchend=function(){e.onmousemove=null,this.onmouseup=null,l()}}:e.onmousedown=function(t){t=t||window.event;const a=o.value.getBoundingClientRect().top,n=o.value.getBoundingClientRect().left;let s=t.pageX-e.offsetLeft-n,r=t.pageY-e.offsetTop-a;i.beginPath(),i.arc(s,r,15,0,6.3,!1),i.fill(),e.onmousemove=function(t){(t=t||window.event).preventDefault(),i.beginPath(),i.moveTo(s,r),i.lineTo(t.pageX-e.offsetLeft-n,t.pageY-e.offsetTop-a),s=t.pageX-e.offsetLeft-n,r=t.pageY-e.offsetTop-a,i.stroke()},document.onmouseup=function(){e.onmousemove=null,this.onmouseup=null,l()}};const l=()=>{let l=i.getImageData(0,0,e.width,e.height).data,n=0;for(let e=0;e<l.length;e+=4)0==l[e]&&0==l[e+1]&&0==l[e+2]&&0==l[e+3]&&n++;let o=100*n/(e.width*e.height);o>a.maxArea&&(i.beginPath(),i.fillRect(0,0,e.width,e.height)),t("getResult",{currentArea:o,isSuccess:o>a.maxArea})}};return(e,t)=>(l(),n("div",{ref_key:"box",ref:o,class:"g-scrape-music",style:u(`width: ${a.width};height: ${a.height};`)},[r("img",{ref_key:"oImg",ref:s,src:a.url},null,8,q)],4))}}),[["__scopeId","data-v-3d95ad44"]]),V=[{id:0,name:"奖励11",image:"https://img2.baidu.com/it/u=3719466279,99109861&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500",type:1,number:1},{id:1,name:"奖励22",image:"https://img1.baidu.com/it/u=1735623407,4117002237&fm=253&fmt=auto&app=138&f=JPEG?w=616&h=500",type:1,number:1},{id:2,name:"奖励33",image:"https://img1.baidu.com/it/u=2644452384,3800439215&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500",type:1,number:1},{id:3,name:"奖励44",image:"https://img1.baidu.com/it/u=3002983824,1456869839&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=501",type:1,number:1},{id:4,name:"奖励55",image:"https://img1.baidu.com/it/u=1821938405,180668334&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500",type:1,number:1},{id:5,name:"奖励66",image:"https://img2.baidu.com/it/u=3719466279,99109861&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500",type:1,number:1},{id:6,name:"奖励77",image:"https://img2.baidu.com/it/u=240595935,690204872&fm=253&fmt=auto&app=138&f=JPEG?w=400&h=400",type:1,number:1},{id:7,name:"奖励88",image:"https://img1.baidu.com/it/u=633678651,1473215387&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500",type:1,number:1}],Q=(e=>(w("data-v-fff229fa"),e=e(),b(),e))((()=>r("div",null,"抽奖",-1))),Z=["src"],K=X(a({__name:"index",props:{gift:{type:Number,default:0},number:{type:Number,default:0},width:{type:Number,default:300},height:{type:Number,default:300},list:{type:Array,default:()=>V}},emits:["luckResult"],setup(e,{emit:t}){const a=e,{errorTip:i}=L(),o=g({maxCount:6,number:0,speed:150,count:0,index:0,gift:0,flag:!0,list:V});m(a,((e,t)=>{o.gift=e.gift,o.number=e.number,e.list&&e.list.length&&(o.list=e.list)}),{deep:!0,immediate:!0});const s=()=>{o.flag?o.number?(o.flag=!1,d()):i("已无抽奖次数"):i("正在抽奖中，请勿重复点击")};let h;const d=()=>{h=setTimeout((()=>{o.count+=1,o.index=o.index<o.list.length-1?o.index+=1:0,o.count>o.maxCount+16&&o.index===o.gift?(clearTimeout(h),w()):(d(),o.speed=o.count<o.maxCount+3?o.speed-=5:o.speed+=15)}),o.speed)},w=()=>{o.speed=150,o.count=0,o.flag=!0,t("luckResult",o.list[o.index])};return(e,t)=>(l(),n("div",{class:"g-shop-game",style:u(`width: ${a.width/10}rem;height: ${a.height/10}rem;`)},[r("div",{class:"start-btn",onClick:s},[Q,r("div",null,"("+c(o.number)+")次",1)]),(l(!0),n(p,null,v(o.list,((e,t)=>(l(),n("div",{key:t,class:f(["item-btn",`item${t}`,o.index===t?"active-btn":""])},[r("img",{src:e.image,alt:""},null,8,Z),r("div",null,c(e.name),1)],2)))),128))],4))}}),[["__scopeId","data-v-fff229fa"]]),ee=X(a({__name:"index",setup(e){const t=i(),a=i(),o=g({canvas:null,ctx:null,width:0,height:0,deepMax:3,lineLength:3,point:{x:0,y:0},pendingTasks:[],frameCount:0});d((()=>{o.canvas=a,o.ctx=o.canvas.getContext("2d"),o.width=t.value.clientWidth,o.height=t.value.clientHeight,o.canvas.width=o.width,o.canvas.height=o.height;const e={x:v(200,o.width-200),y:0};u(e,"top");const i={x:v(200,o.width-200),y:o.height};u(i,"bottom");const l={x:0,y:v(200,o.height-200)};u(l,"left");const n={x:o.width,y:v(200,o.height-200)};u(n,"right"),s()}));const s=()=>{requestAnimationFrame((()=>{o.frameCount+=1,o.frameCount%3==0&&(()=>{const e=[...o.pendingTasks];o.pendingTasks.length=0,e.forEach((e=>e()))})(),s()}))},u=(e,t)=>{const a="top"===t?Math.PI/2:"bottom"===t?-Math.PI/2:"left"===t?Math.PI/16:Math.PI,i={start:e,length:o.lineLength,angle:a};c(i)},c=(e,t=0)=>{const a=p(e);h(e),(t<o.deepMax||Math.random()<.5)&&o.pendingTasks.push((()=>{c({start:a,length:o.lineLength+v(1,5),angle:e.angle-.3*Math.random()},t+=1)})),(t<o.deepMax||Math.random()<.5)&&o.pendingTasks.push((()=>{c({start:a,length:o.lineLength+v(1,5),angle:e.angle+.3*Math.random()},t+=1)}))},h=e=>{const{start:t,length:a,angle:i}=e,l=p(e);m(t,l)},m=(e,t)=>{const a=o.ctx;a.beginPath(),a.moveTo(e.x,e.y);const i=v(200,255),l=v(200,255),n=v(200,255);a.strokeStyle=`rgb(${i},${l},${n})`,a.lineWidth=1,a.lineTo(t.x,t.y),a.stroke()},p=e=>{const{start:t,length:a,angle:i}=e;return{x:t.x+a*Math.cos(i),y:t.y+a*Math.sin(i)}},v=(e,t)=>Math.floor(Math.random()*(t-e)+e);return(e,i)=>(l(),n("div",{class:"g-pulm-tree",ref_key:"box",ref:t},[r("canvas",{class:"myCanvasPlum",ref_key:"myCanvasPlum",ref:a},null,512)],512))}}),[["__scopeId","data-v-d4b194aa"]]),te={class:"g-lucky-turn"},ae=(e=>(w("data-v-f0bd7b04"),e=e(),b(),e))((()=>r("div",{class:"box-arrow"},null,-1))),ie=X(a({__name:"index",props:{luckyW:{default:1500},luckyH:{default:1500},luckyImg:{default:"https://gem530.github.io/img/lucky_bg.png"},luckyIndex:{default:0},isShowPrz:{type:Boolean,default:!1}},emits:["endPlay"],setup(e,{emit:t}){const a=e,i=g({awardName:"",imgWidth:0,imgHeight:0,prize_list:[{},{},{},{},{},{},{},{}],start_rotating_degree:0,rotate_angle:0,start_rotating_degree_pointer:0,rotate_angle_pointer:0,rotate_transition:"transform 6s ease-in-out",rotate_transition_pointer:"transform 12s ease-in-out",click_flag:!0,index:0});d((()=>{const e=document.querySelector("#myCanvas");var t=e.getContext("2d");const l=new Image;l.crossorigin="Anonymous",l.src=a.luckyImg,l.onload=()=>{i.imgWidth=l.width,i.imgHeight=l.height,e.width=i.imgWidth,e.height=i.imgHeight,t.drawImage(l,0,0,666,665)}}));const o=()=>{i.index=a.luckyIndex,s()},s=()=>{if(i.click_flag){var e=i.index;i.click_flag=!1;var a=i.start_rotating_degree+1440+[337.5,292.5,247.5,202.5,157.5,112.5,67.5,22.5][e]-i.start_rotating_degree%360;i.start_rotating_degree=a,i.rotate_angle="rotate("+a+"deg)",setTimeout((()=>{i.click_flag=!0,t("endPlay",i.click_flag)}),6500)}};return(e,t)=>(l(),n("div",te,[r("canvas",{id:"myCanvas",class:f(["wheel-bg-canvas",a.isShowPrz&&"demo_css"]),style:u({width:a.luckyW/750*10+"rem"||"",height:a.luckyH/750*10+"rem"||"",transform:i.rotate_angle,transition:i.rotate_transition})},null,6),r("div",{class:"box-btn"},[ae,r("button",{onClick:o},"开始")])]))}}),[["__scopeId","data-v-f0bd7b04"]]),le=["width","height"],ne=["src"],oe={class:"flex"},se=["max","step"],re={class:"flex"},ue=["onClick"],ce={class:"flex"},he=["onClick"],de={class:"flex"},ge=X(a({__name:"index",props:{width:{type:Number,default:500},height:{type:Number,default:500},maxScale:{type:Number,default:3},scaleStep:{type:Number,default:.01},img:{type:String,default:"https://img1.baidu.com/it/u=2644452384,3800439215&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500"},colors:{type:Array,default:()=>["pink","skyblue","orange"]},isImgWH:{type:Boolean,default:!1},graphical:{type:Array,default:()=>[{key:"Rect",name:"矩形"},{key:"RectR",name:"圆角矩形"},{key:"Circle",name:"圆"},{key:"Ellipse",name:"椭圆"},{key:"Triangle",name:"三角形"},{key:"Line",name:"线段"},{key:"IText",name:"文字"}]}},emits:["getImg"],setup(e,{emit:t}){var a;const h=e,m=g({isMove:!1,isCreateObject:!0,isStroke:!1,isOperat:!1});let w=null,b=null;const k=i(),C=i(null),_=i(void 0),P=i(h.img),I=i(1),T=i(0),M=i(0),S=i(1);let D=h.width,j=h.height;const R=i(h.colors[0]),Y=i(null==(a=h.graphical[0])?void 0:a.key);d((async()=>{if(h.isImgWH){const{w:e,h:t}=await X();D=e,j=t}L()}));const X=()=>new Promise(((e,t)=>{let a=new Image;a.src=h.img,a.crossOrigin="anonymous",a.onload=()=>{e({w:a.width,h:a.height})},a.onerror=e=>{t(e)}})),B=e=>{w.selection=!1;for(let t in m)m[t]=t==e;if("isStroke"===e&&(m.isCreateObject=!0),"isOperat"===e){w.getObjects().forEach((e=>{e.selectable=!0})),w.selection=!0,w.setViewportTransform(w.viewportTransform)}},A=()=>{w.getActiveObjects().forEach((e=>{w.remove(e)}))},L=async()=>{w=new E.fabric.Canvas("canvasDom",{width:D,height:j}),w.lastzoomPointX=D/2,w.lastzoomPointY=j/2,w.relativeX=0,w.relativeY=0;const e=await V();z(),J(),w.setBackgroundImage(e),w.renderAll(),w.selection=!1,w.selectionFullyContained=!0,W()},W=()=>{w.on({"mouse:up":e=>N(e),"mouse:move":e=>H(e),"mouse:down":e=>$(e),"mouse:wheel":e=>F(e)})},U=()=>{q("init",D/2,j/2)},O=e=>{q(e,D/2,j/2)},F=({e:e})=>{const t=e.deltaY<0?"+":"-";e.preventDefault(),e.stopPropagation(),q(t,e.pageX-M.value,e.pageY-T.value)},$=({e:e})=>{if(e.preventDefault(),e.stopPropagation(),T.value=k.value.getBoundingClientRect().top,M.value=k.value.getBoundingClientRect().left,w.isDragging=!0,w.lastPosX=e.clientX,w.lastPosY=e.clientY,m.isCreateObject){const{top:t,left:a}=G(e);switch(Y.value){case"Rect":case"RectR":b=new E.fabric.Rect,w.add(b);break;case"Circle":b=new E.fabric.Circle,w.add(b);break;case"Ellipse":b=new E.fabric.Ellipse,w.add(b);break;case"Triangle":b=new E.fabric.Triangle({width:0,height:0,top:t,left:a}),w.add(b);break;case"IText":b=new E.fabric.IText("请输入。。",{top:t,left:a}),w.add(b)}}},H=({e:e})=>{if(e.preventDefault(),e.stopPropagation(),w.isDragging){if(m.isMove){let t=w.viewportTransform;t[4]+=e.clientX-w.lastPosX,t[5]+=e.clientY-w.lastPosY,w.requestRenderAll(),w.lastPosX=e.clientX,w.lastPosY=e.clientY,w.relativeX=t[4],w.relativeY=t[5],w.setViewportTransform(w.viewportTransform)}if(m.isCreateObject){const{top:t,left:a,w:i,h:l,right:n,bottom:o}=G(e),s=m.isStroke?"":R.value,r=m.isStroke?R.value:"";switch(Y.value){case"Rect":case"Triangle":b.set({width:Math.abs(a-n),height:Math.abs(t-o),fill:s,stroke:r,top:Math.min(t,o),left:Math.min(a,n)});break;case"RectR":b.set({width:Math.abs(a-n),height:Math.abs(t-o),fill:s,stroke:r,top:Math.min(t,o),left:Math.min(a,n),rx:5,ry:5});break;case"Circle":b.set({radius:Math.abs(i/2),fill:s,stroke:r,top:Math.min(t,o),left:Math.min(a,n)});break;case"Ellipse":b.set({rx:Math.abs(i/2),ry:Math.abs(l/2),fill:s,stroke:r,top:Math.min(t,o),left:Math.min(a,n)})}w.renderAll(),w.setViewportTransform(w.viewportTransform)}}},N=({e:e})=>{if(e.preventDefault(),e.stopPropagation(),w.isDragging=!1,m.isCreateObject){const{top:t,left:a,right:i,bottom:l}=G(e);switch(Y.value){case"Line":b=new E.fabric.Line([a,t,i,l],{stroke:R.value}),w.add(b);break;case"IText":w.renderAll()}b.selectable=!1}},G=e=>{const t=(e.clientX-w.lastPosX)/I.value,a=(e.clientY-w.lastPosY)/I.value,i=w.relativeX>0?2*w.relativeX:0,l=w.relativeY>0?2*w.relativeY:0,n=(e.clientX-M.value+Math.abs(w.viewportTransform[4])-i)/I.value,o=(e.clientY-T.value+Math.abs(w.viewportTransform[5])-l)/I.value;return{relaX:i,relaY:l,top:(w.lastPosY-T.value+Math.abs(w.viewportTransform[5])-l)/I.value,left:(w.lastPosX-M.value+Math.abs(w.viewportTransform[4])-i)/I.value,w:t,h:a,right:n,bottom:o}},z=()=>{C.value.top=j/2,C.value.left=D/2,C.value.originX="center",C.value.originY="center",C.value.selectable=!1,C.value.cornerStyle="circle",C.value.rotate(0)},q=(e,t,a)=>{let i;if("change"==e)i=I.value;else if("init"==e){i=1,w.relativeX=0,w.relativeY=0;const e=[1,0,0,1,0,0];w.setViewportTransform(e)}else i=("-"==e?-h.scaleStep:h.scaleStep)+w.getZoom();i=Math.max(1,i),i=Math.min(h.maxScale,i),w.lastzoomPointX=t,w.lastzoomPointY=a;const l=new E.fabric.Point(t,a);w.relativeX=w.viewportTransform[4]/i,w.relativeY=w.viewportTransform[5]/i,w.zoomToPoint(l,i),w.setViewportTransform(w.viewportTransform),I.value=i},J=()=>{const e=C.value.width>D?D/C.value.width:C.value.width/D,t=C.value.height>j?j/C.value.height:C.value.height/D,a=e<=t?e:t;C.value.scaleX=a,C.value.scaleY=a,S.value=a},V=()=>new Promise(((e,t)=>{E.fabric.Image.fromURL(P.value,(t=>{C.value=t,e(t)}),{crossOrigin:"anonymous"})})),Q=()=>{_.value=((e=1,t="png")=>w.toDataURL({top:0,left:0,width:D,height:j,format:t,quality:e}))();const e=Z(_.value);t("getImg",{url:_.value,blob:e})},Z=e=>{for(var t=e.split(","),a=t[0].match(/:(.*?);/)[1],i=atob(t[1]),l=i.length,n=new Uint8Array(l);l--;)n[l]=i.charCodeAt(l);return new Blob([n],{type:a})};return(e,t)=>(l(),n("div",{class:"g-img-overlays",style:u(`width: ${y(D)}px;`)},[r("canvas",{id:"canvasDom",ref_key:"myCanvas",ref:k,width:y(D),height:y(j)},null,8,le),r("img",{src:_.value,alt:""},null,8,ne),r("div",oe,[r("button",{onClick:t[0]||(t[0]=e=>O("-"))},"-"),o(r("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=e=>I.value=e),min:1,max:h.maxScale,step:h.scaleStep,onInput:t[2]||(t[2]=e=>O("change"))},null,40,se),[[x,I.value]]),r("button",{onClick:t[3]||(t[3]=e=>O("+"))},"+"),r("button",{onClick:U},"还原"),r("button",{onClick:Q},"裁剪"),o(r("div",null,[r("div",re,[(l(!0),n(p,null,v(h.colors,(e=>(l(),n("div",{key:e,style:u(`background: ${e};`),class:f({"flex-item":!0,"active-flex":e==R.value}),onClick:t=>R.value=e},null,14,ue)))),128))]),r("div",ce,[(l(!0),n(p,null,v(h.graphical,(e=>(l(),n("div",{key:e.key,class:f({"flex-item":!0,"active-flex":e.key==Y.value}),onClick:t=>(e=>{Y.value=e.key})(e)},c(e.name),11,he)))),128))])],512),[[s,m.isCreateObject]]),r("div",de,[r("button",{onClick:t[4]||(t[4]=e=>B("isMove"))},"移动"),r("button",{onClick:t[5]||(t[5]=e=>B("isCreateObject"))},"绘制"),r("button",{onClick:t[6]||(t[6]=e=>B("isStroke"))},"框"),r("button",{onClick:t[7]||(t[7]=e=>B("isOperat"))},"操作"),o(r("button",{onClick:A},"删除",512),[[s,m.isOperat]])])])],4))}}),[["__scopeId","data-v-8747a947"]]),me=async(e,t,a)=>{let i=document.createElement("canvas"),l=i.getContext("2d");const{w:n,h:o,img:s}=await(e=>new Promise(((t,a)=>{let i=new Image;if(e instanceof File){const t=new FileReader;t.onload=e=>{i.src=e.target.result},t.onerror=e=>{e.name="FileReader",a(e)},t.readAsDataURL(e)}else i.src=e;i.crossOrigin="anonymous",i.onload=()=>{t({img:i,w:i.width,h:i.height})},i.onerror=e=>{e.name="createImage",a(e)}})))(e);let r=0,u=0;return t&&!a&&(r=t,u=r*o/n),!t&&a&&(u=a,r=n*u/o),i.width=r,i.height=u,l.drawImage(s,0,0,r,u),{canvas:i,ctx:l}},pe=e=>(w("data-v-13c58433"),e=e(),b(),e),ve={class:"photo-overflow"},fe=["width"],we=pe((()=>r("span",null,"未获取到取景框拍照权限",-1))),be=pe((()=>r("span",null,"请点击右上角刷新后授权，或者",-1))),ye=_(" 直接手机拍照 "),xe=pe((()=>r("button",{style:{position:"absolute",top:"0px",left:"0px"}},"拍照",-1))),ke=X(a({__name:"index",props:{width:{default:350},height:{default:200}},emits:["getPhotoBlob"],setup(e,{emit:t}){const a=e,c=i(),h=i(),d=g({flag:!0,imgNewURL:"",widthD:0,heightD:0,clientWidthD:0,clientHeightD:0,photoW:0,photoH:0,photoFlag:!0});Y((()=>{navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?d.flag=!0:d.flag=!1,P((()=>{v("environment")}))}));const m=e=>{p(),v(e)},p=()=>c.value.srcObject&&c.value.srcObject.getTracks().map((e=>e.stop())),v=e=>{d.clientWidthD=document.body.clientWidth,d.clientHeightD=document.body.clientHeight,a.width?(d.widthD=a.width,d.clientWidthD=a.width):d.widthD=d.clientWidthD,a.height?(d.heightD=a.height,d.clientHeightD=a.height):d.heightD=d.clientHeightD;const t=navigator;void 0===t.mediaDevices&&(t.mediaDevices={}),void 0===t.mediaDevices.getUserMedia&&(t.mediaDevices.getUserMedia=function(e){const a=t.webkitGetUserMedia||t.mozGetUserMedia;return a?new Promise((function(i,l){a.call(t,e,i,l)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),t.mediaDevices.getUserMedia({audio:!1,video:{facingMode:e}}).then((function(e){"srcObject"in c.value?c.value.srcObject=e:c.value.src=window.URL.createObjectURL(e),c.value.onloadedmetadata=function(){c.value.play()},P((()=>{c.value.addEventListener("canplay",(()=>{d.photoW=c.value.videoWidth,d.photoH=c.value.videoHeight,d.widthD>d.photoW&&(d.widthD=d.photoW),d.heightD>d.photoH&&(d.heightD=d.photoH*d.widthD/d.photoW)}))}))})).catch((function(e){d.photoFlag=!1}))},f=async()=>{if(!d.photoFlag)return void h.value.click();const e=document.createElement("canvas"),a=e.getContext("2d");d.flag,e.width=d.widthD,e.height=d.heightD,a.drawImage(c.value,0,0,d.photoW,d.photoW*(d.heightD/d.widthD),0,0,e.width,e.height);const i=e.toDataURL("image/jpeg",1),l=await b(i);t("getPhotoBlob",{blob:l,baseUrl:i})},w=async()=>{const e=document.getElementById("ground-push-image").files[0],a=await((e,t=.92,a="image/jpeg",i,l)=>new Promise((async(n,o)=>{try{const{canvas:o,ctx:s}=await me(e,i,l);o.toBlob((e=>{n(e)}),a,t)}catch(s){s.name="compressionImgToBlob",o(s)}})))(e,.3),i=await(async(e,t=.92,a="image/jpeg",i,l)=>{const{canvas:n,ctx:o}=await me(e,i,l);return n.toDataURL(a,t)})(e,.3);t("getPhotoBlob",{blob:a,baseUrl:i})},b=e=>{const t=window.atob(e.split(",")[1]),a=new ArrayBuffer(t.length),i=new Uint8Array(a);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return new Blob([a],{type:"image/jpeg"})};return(e,t)=>(l(),n("div",{class:"g-find-frame",style:u(`width: ${d.clientWidthD}px;height: ${d.heightD}px;`)},[o(r("div",ve,[r("video",{class:"video-contain",ref_key:"video",ref:c,id:"video",width:d.clientWidthD,autoplay:"",playsinline:"","webkit-playsinline":"true",muted:""},null,8,fe)],512),[[s,d.photoFlag]]),o(r("div",{class:"error",style:u(`width: ${d.clientWidthD}px;height: ${d.heightD}px;`)},[we,be,r("button",null,[ye,r("input",{type:"file",ref_key:"qrcodeImageDom",ref:h,id:"ground-push-image",onChange:w,accept:"image/*",capture:""},null,544)])],4),[[s,!d.photoFlag]]),r("div",{class:"btn-photo",onClick:f},[r("button",{onClick:t[0]||(t[0]=k((e=>m("user")),["stop"]))},"前置摄像头"),C(e.$slots,"default",{},(()=>[xe]),!0),r("button",{onClick:t[1]||(t[1]=k((e=>m("environment")),["stop"]))},"后置摄像头")])],4))}}),[["__scopeId","data-v-13c58433"]]),Ce=X(a({__name:"index",props:{text:{default:"富强、民主、文明、和谐、自由、平等、公正、法治、爱国、敬业、诚信、友善、"}},setup(e){const t=e,a=i(),o=i(),s=g({canvas:null,ctx:null,width:0,height:0,text:"",textIndex:0,fontSize:5,isPc:!0,downFlag:!1,point:{pageX:0,pageY:0}});d((()=>{navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?s.isPc=!1:s.isPc=!0,s.width=600,s.height=600,u()}));const u=()=>{s.canvas=a,s.ctx=s.canvas.getContext("2d"),s.canvas.width=s.width,s.canvas.height=s.height},c=e=>{let t={pageX:0,pageY:0};if(s.isPc)t={pageX:e.pageX,pageY:e.pageY};else{const a=e;t={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY}}return t},h=e=>{const t=c(e);s.downFlag=!0,s.point={pageX:t.pageX,pageY:t.pageY}},m=e=>{if(!s.downFlag)return;const a=c(e),i=s.ctx,l=o.value.getBoundingClientRect().top,n=o.value.getBoundingClientRect().left,r=w(a,s.point),u=t.text[s.textIndex],h=s.fontSize+r/2,d=b(h,u);var g=Math.atan2(a.pageY-s.point.pageY,a.pageX-s.point.pageX);r>d&&(i.font=h+"px Arial",i.fillStyle=v(),i.save(),i.translate(s.point.pageX-n,s.point.pageY-l),i.rotate(g),i.fillText(u,0,0),i.restore(),s.textIndex=s.textIndex>=t.text.length-1?0:s.textIndex+1,s.point={pageX:a.pageX,pageY:a.pageY})},p=e=>{c(e),s.downFlag=!1,s.textIndex=0},v=()=>`rgb(${f(0,255)},${f(0,255)},${f(0,255)})`,f=(e,t)=>Math.floor(Math.random()*(t-e)+e),w=(e,t)=>Math.sqrt(Math.pow(t.pageX-e.pageX,2)+Math.pow(t.pageY-e.pageY,2)),b=(e,t)=>{const a=s.ctx;return a.font=e+"px Arial",a.fillText?a.measureText(t).width:a.mozDrawText?a.mozMeasureText(t):void 0};return(e,t)=>(l(),n("div",{class:"component theme",ref_key:"box",ref:o},[r("canvas",{class:"myCanvas",ref_key:"myCanvasRef",ref:a,onMousedown:h,onMousemove:m,onMouseup:p,"on:touchStart":h,"on:touchMove":m,"on:touchEnd":p},null,544)],512))}}),[["__scopeId","data-v-419ee4fe"]]),_e={class:"btn-base"},Pe=["onClick"],Ie={class:"btn-sub"},Te=["onClick"],Me=X(a({__name:"index",props:{url:{default:""},type:{default:"base64"},echo:{type:Boolean,default:!0},left:{type:Boolean,default:!1},width:{default:"100%"},height:{default:"200px"},colors:{default:()=>[{name:"红",value:"#ff0000"},{name:"蓝",value:"#0000ff"},{name:"黄",value:"#ffff00"},{name:"紫",value:"#ff00ff"},{name:"粉",value:"pink"}]},signFlag:{type:Boolean,default:!1},thickness:{default:()=>[{name:"细",value:"1"},{name:"中",value:"3"},{name:"粗",value:"7"}]},background:{default:"#fff"},defaultColor:{default:"#000"},defaultThickness:{default:"2"}},emits:["upload","update:url"],setup(e,{expose:t,emit:a}){const w=e,b=I({get:()=>w.url,set:e=>{a("update:url",e)}}),y=i(),x=i(),k=i(),C=g({e:{pageX:"",pageY:""},flag:!0,color:"#000",width:"",height:"",subType:"",moveFlag:!1,thickness:"2",firstFill:!0,subBtnFlag:!1,baseList:[],btnsList:[{name:"颜色",isShow:!!w.colors.length,fun:()=>j("colors")},{name:"粗细",isShow:!!w.thickness.length,fun:()=>j("thickness")},{name:"清除",isShow:!0,fun:()=>R()},{name:"提交",isShow:!0,fun:()=>Y()}]});m((()=>w),((e,t)=>{e.defaultColor&&(C.color=e.defaultColor),e.defaultThickness&&(C.thickness=e.defaultThickness)}),{deep:!0,immediate:!0}),d((()=>{x.value=k.value.getContext("2d"),_(),window.addEventListener("mouseup",L),window.addEventListener("mousemove",A),window.addEventListener("mousedown",B),window.addEventListener("touchend",L),window.addEventListener("touchmove",A),window.addEventListener("touchstart",B)}));const _=()=>{P((()=>{C.width="100%"===w.width?y.value.clientWidth+"px":w.width,C.height="100%"===w.height?y.value.clientHeight+"px":w.height,k.value.setAttribute("width",C.width),k.value.setAttribute("height",C.height),S(b.value)}))},S=e=>{if(!e)return;let t=new Image;t.crossOrigin="anonymous",t.src=e,t.onload=()=>{const e=(k.value.width-t.width)/2,a=(k.value.height-t.height)/2;x.value.drawImage(t,e,a,t.width,t.height)}},D=e=>"colors"===C.subType?`color: ${e.value};border-color: ${C.color===e.value?C.color:""}`:`border-color: ${C.thickness===e.value?C.color:""}`,j=e=>{C.subType!==e?C.subBtnFlag=!0:C.subBtnFlag=!C.subBtnFlag,C.subType=e,C.baseList=w[C.subType]},R=()=>{x.value.fillStyle=w.background,x.value.fillRect(0,0,k.value.width,k.value.height)},Y=()=>{x.value.drawImage(k.value,0,0,k.value.width,k.value.height);const e=k.value.toDataURL("image/png",1);k.value.toBlob((function(t){b.value="blob"===w.type?t:e,a("upload",{blob:t,base64:e})}),"image/png")},X=e=>{let t={pageX:0,pageY:0};if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)){const a=e;t={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY}}else t={pageX:e.pageX,pageY:e.pageY};return t},B=e=>{C.moveFlag=!0,C.e=X(e)},A=e=>{var t;if(!C.moveFlag||w.signFlag&&C.flag)return;w.echo&&C.firstFill&&"canvas"===(null==(t=e.target)?void 0:t.tagName.toLowerCase())&&(R(),C.firstFill=!1);const a=y.value.getBoundingClientRect().top,i=y.value.getBoundingClientRect().left,l=X(e);x.value.beginPath(),x.value.lineWidth=C.thickness,x.value.strokeStyle=C.color,x.value.moveTo(C.e.pageX-i,C.e.pageY-a),x.value.lineTo(l.pageX-i,l.pageY-a),x.value.stroke(),C.e=l},L=()=>{C.moveFlag=!1};var E;return E=()=>{window.removeEventListener("mouseup",L),window.removeEventListener("mousemove",A),window.removeEventListener("mousedown",B),window.removeEventListener("touchend",L),window.removeEventListener("touchmove",A),window.removeEventListener("touchstart",B)},T((()=>{E&&E()})),M((()=>{E&&E()})),t({resizeChange:_}),(e,t)=>(l(),n("div",{class:"g-draw-board",ref_key:"box",ref:y,style:u(`width: ${w.width};height: ${w.height};`)},[o(r("div",{class:"mask theme",onClick:t[0]||(t[0]=e=>C.flag=!C.flag)},"点击签署",512),[[s,w.signFlag&&C.flag]]),r("canvas",{ref_key:"myCanvas",ref:k},null,512),r("div",{class:f(["btn-box",w.left?"btn-box-lefts":""])},[r("div",_e,[(l(!0),n(p,null,v(C.btnsList,((e,t)=>(l(),n(p,{key:t},[e.isShow?(l(),n("div",{key:0,class:"base-item",onClick:t=>e.fun()},c(e.name),9,Pe)):h("",!0)],64)))),128))]),o(r("div",Ie,[(l(!0),n(p,null,v(C.baseList,((e,t)=>(l(),n("div",{class:"base-item",key:t,style:u(D(e)),onClick:t=>(e=>{let t="colors"===C.subType?"color":"thickness";C[t]=e,C.subBtnFlag=!1})(e.value)},c(e.name),13,Te)))),128))],512),[[s,C.subBtnFlag]])],2)],4))}}),[["__scopeId","data-v-cd655534"]]),Se=["width","height"],De=X(a({__name:"index",props:{w:{default:320},h:{default:150},num:{default:"1000"}},setup(e){const t=e,a=i();let o,s;m((()=>t.num),((e,t)=>{P((()=>{o=a.value,s=o.getContext("2d"),r()}))}),{deep:!0,immediate:!0});const r=()=>{s.clearRect(0,0,o.width,o.height);const e=t.num.toString().split(""),a=o.width/e.length;e.forEach(((e,t)=>{var i,l,n;i=e,l=a*t+a/2,n=A(50,255),new Promise(((e,t)=>{try{s.beginPath(),s.restore(),s.save();const t=o.height/2;s.font=t+"px bold 黑体",s.translate(l,t),s.rotate(B(-180,180)*Math.PI/180),s.translate(-l,-t),s.fillStyle=n,s.textAlign="center",s.textBaseline="middle",s.fillText(i,l,o.height/2),e(!0)}catch(a){t(a)}}))}))};return(e,i)=>(l(),n("canvas",{ref_key:"loginCheckout",ref:a,width:t.w,height:t.h},"当前浏览器不支持canvas，请更换浏览器后再试",8,Se))}}),[["__scopeId","data-v-2c75090c"]]),je=["width","height"],Re=["src"],Ye={class:"flex"},Xe={class:"upload-btn"},Be=_("上传头像 "),Ae=["min","max","step"],Le=X(a({__name:"index",props:{width:{type:Number,default:300},height:{type:Number,default:300},x:{type:Number,default:150},y:{type:Number,default:150},clipWidth:{type:Number,default:150},clipHeight:{type:Number,default:150},maskColor:{type:String,default:"rgba(0, 0, 0, 0.5)"},minScale:{type:Number,default:.01},maxScale:{type:Number,default:3},scaleStep:{type:Number,default:.01},rotate:{type:Number,default:90}},emits:["getImg"],setup(e,{emit:t}){const a=e,s=i(),c=i(),h=i(null),g=i(null),m=i(void 0),p=i("https://gem530.github.io/img/33.jpg"),v=i(1),f=i(0),w=a.width,b=a.height,y=a.maskColor,k=a.y-a.clipHeight/2,C=a.x-a.clipWidth/2,_=a.x+a.clipWidth/2,P=a.y+a.clipHeight/2;d((()=>{I()}));const I=async()=>{const e=new E.fabric.Canvas("canvas",{width:w,height:b,preserveObjectStacking:!0}),t=await S();T(),e.add(t);const a=new E.fabric.Group([new E.fabric.Rect({width:w,height:k+.08,fill:y,top:0,left:0}),new E.fabric.Rect({width:w-_,height:P-k,fill:y,top:k,left:_}),new E.fabric.Rect({width:w,height:b-P,fill:y,top:P-.06,left:0}),new E.fabric.Rect({width:C,height:P-k,fill:y,top:k,left:0})]);a.evented=!1,a.selectable=!1,e.add(a),e.renderAll(),g.value=e,R()},T=()=>{h.value.top=b/2,h.value.left=w/2,h.value.originX="center",h.value.originY="center",h.value.cornerStyle="circle",h.value.rotate(0)},M=()=>{const e=h.value.width>w?w/h.value.width:h.value.width/w,t=h.value.height>b?b/h.value.height:h.value.height/w,a=e<=t?e:t;h.value.scaleX=a,h.value.scaleY=a,v.value=a},S=()=>new Promise(((e,t)=>{E.fabric.Image.fromURL(p.value,(t=>{h.value=t,M(),e(t)}),{crossOrigin:"anonymous"})})),D=(e,t)=>{"-"===e?v.value-=a.scaleStep:"+"===e&&(v.value+=a.scaleStep),Y()},j=e=>{"right"===e?f.value+=a.rotate:f.value-=a.rotate,h.value.rotate(f),g.value.renderAll()},R=()=>{g.value.on("mouse:wheel",(function(e){const{e:t}=e;t.preventDefault(),v.value=(t.deltaY>0?-a.scaleStep:a.scaleStep)+h.value.scaleX,Y()}))},Y=()=>{v.value=Math.max(a.minScale,v.value),v.value=Math.min(a.maxScale,v.value),h.value.scaleX=v.value,h.value.scaleY=v.value,g.value.renderAll()},X=e=>{const{target:t}=e;let a=new FileReader;a.readAsDataURL(t.files[0]),a.onload=function(e){f.value=0,m.value=void 0,p.value=e.target.result,h.value.setSrc(p.value,(e=>{h.value=e,T(),M(),g.value.renderAll()}))}},B=()=>{m.value=((e,t,a=1,i="png")=>g.value.toDataURL({top:k,left:C,width:e,height:t,format:i,quality:a}))(a.clipWidth,a.clipHeight);const e=A(m.value);t("getImg",{url:m.value,blob:e})},A=e=>{for(var t=e.split(","),a=t[0].match(/:(.*?);/)[1],i=atob(t[1]),l=i.length,n=new Uint8Array(l);l--;)n[l]=i.charCodeAt(l);return new Blob([n],{type:a})};return(e,t)=>(l(),n("div",{class:"g-clip-img",style:u(`width: ${a.width}px;`)},[r("canvas",{id:"canvas",ref_key:"myCanvas",ref:s,width:a.width,height:a.height},null,8,je),r("img",{src:m.value,alt:""},null,8,Re),r("div",Ye,[r("button",Xe,[Be,r("input",{type:"file",accept:"image/*",ref_key:"uploadInput",ref:c,class:"upload-file-input",onChange:X},null,544)]),r("button",{onClick:t[0]||(t[0]=e=>D("-"))},"-"),o(r("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=e=>v.value=e),min:a.minScale,max:a.maxScale,step:a.scaleStep,onInput:t[2]||(t[2]=e=>D("change"))},null,40,Ae),[[x,v.value]]),r("button",{onClick:t[3]||(t[3]=e=>D("+"))},"+"),r("button",{onClick:t[4]||(t[4]=e=>j("right"))},"右旋转"),r("button",{onClick:t[5]||(t[5]=e=>j("left"))},"左旋转"),r("button",{onClick:B},"裁剪")])],4))}}),[["__scopeId","data-v-6230f9f2"]]),Ee=a({__name:"index",props:{x:{default:0},y:{default:0},url:{default:"https://gem530.github.io/img/33.jpg"},width:{default:200},height:{default:200},boxWidth:{default:300},boxHeight:{default:500}},setup(e){const t=e,a=i();d((async()=>{const e=await o(t.url);s(e,t.x,t.y,t.width,t.height)}));const o=e=>{const t=e;return new Promise(((e,a)=>{let i=new Image;i.crossOrigin="anonymous",i.src=t,i.onload=t=>{e(i)},i.onerror=()=>{a()}}))},s=(e,i,l,n,o)=>{const s=document.createElement("canvas");let u=s.getContext("2d");const c=t.boxWidth,h=t.boxHeight;s.width=c,s.height=h,u.drawImage(e,0,0,c,h);let d=u.getImageData(i,l,n,o),g=r(d);u.putImageData(g,i,l);let m=s.toDataURL("image/jpeg");(new Image).src=m,a.value.appendChild(s)},r=e=>{let t=e.data,a=e.width,i=e.height;var l,n,o,s,r,u,c,h,d,g,m=[],p=0;let v=10;for(u=1/(5*Math.sqrt(2*Math.PI)),r=-.02,c=0,l=-10;l<=v;l++,c++)s=u*Math.exp(r*l*l),m[c]=s,p+=s;for(c=0,g=m.length;c<g;c++)m[c]/=p;for(n=0;n<i;n++)for(l=0;l<a;l++){for(o=s=r=u=0,p=0,h=-10;h<=v;h++)(d=l+h)>=0&&d<a&&(o+=t[c=4*(n*a+d)]*m[h+v],s+=t[c+1]*m[h+v],r+=t[c+2]*m[h+v],p+=m[h+v]);t[c=4*(n*a+l)]=o/p,t[c+1]=s/p,t[c+2]=r/p}for(l=0;l<a;l++)for(n=0;n<i;n++){for(o=s=r=u=0,p=0,h=-10;h<=v;h++)(d=n+h)>=0&&d<i&&(o+=t[c=4*(d*a+l)]*m[h+v],s+=t[c+1]*m[h+v],r+=t[c+2]*m[h+v],p+=m[h+v]);t[c=4*(n*a+l)]=o/p,t[c+1]=s/p,t[c+2]=r/p}return e};return(e,t)=>(l(),n("div",{ref_key:"box",ref:a},null,512))}}),We=a({name:"g-tsx",props:{text:{type:String,default:"text"},tsxList:{type:Array,default:()=>[]}},emits:["update:text","getInfo"],setup:(e,t)=>({editText:()=>{t.emit("update:text","修改了text的文案")},createDom:e=>({p:()=>S("p",null,[e.value]),button:()=>S(W,e.attrs,{default:()=>[e.value]}),slot:()=>{var a;let i=null!=(a=t.slots[e.prop])?a:t.attrs.slots[e.prop];return i?i({item:e}):""}}[e.type]()),getInfoHandle:()=>{t.emit("getInfo","666")}}),render(){return S(p,null,[S("div",null,[this.$props.text,S("div",null,[this.$props.tsxList.map((e=>this.createDom(e)))]),S(W,{onclick:this.editText},{default:()=>[_("修改")]}),S(W,{onclick:this.getInfoHandle},{default:()=>[_("获取信息")]})])])}}),Ue=e=>new Promise(((t,a)=>{let i,l,n;"object"==typeof e?(i=e.size,l=e.value,n=e.level):l=e;const o=document.createElement("div");o.style.display="none",document.body.appendChild(o);try{const e=S(F,{value:l,size:null!=i?i:60,level:null!=n?n:"H"});D(e,o);const a=o.getElementsByTagName("canvas")[0];t(a.toDataURL("img/png"))}catch(s){a(s)}finally{document.body.removeChild(o)}}));class Oe{constructor(e,a=236,i=428,l=3){t(this,"ctx"),t(this,"list"),t(this,"canvas"),t(this,"scale"),t(this,"width"),t(this,"height"),this.list=e,this.scale=l,this.width=a,this.height=i}drawAll(){return new Promise((async(e,t)=>{let a=[];for(let i=0;i<this.list.length;i++){const e=await this.draw(this.list[i]);a.push(e)}e(a)}))}draw(e){return new Promise((async(t,a)=>{try{const a=e||this.list;this.canvas=document.createElement("canvas"),this.canvas.width=this.width*this.scale,this.canvas.height=this.height*this.scale,this.ctx=this.canvas.getContext("2d");for(let e=0;e<a.length;e++){const t=a[e];if("image"===t.type){if("qrcode"===t.name&&t.url){const e=await Ue(t.url);t.url=e}await this.drawImage(t.url,t.x,t.y,t.width,t.height)}"text"===t.type&&await this.drawText(t.url,t.x,t.y,t.color,t.font)}t(await this.canvas.toDataURL("img/png"))}catch(i){a(i)}}))}drawImage(e,t,a,i,l){return new Promise(((n,o)=>{const s=new Image;s.crossOrigin="Anonymous",s.src=e,s.onload=()=>{this.ctx.beginPath(),this.ctx.drawImage(s,t*this.scale,a*this.scale,i*this.scale,l*this.scale),n(!0)},s.onerror=e=>{o(e)}}))}drawText(e,t,a,i,l="16px Arial"){return new Promise((n=>{this.ctx.beginPath(),this.ctx.font=l,this.ctx.fillStyle=i,this.ctx.fillText(e,t*this.scale,a*this.scale),n(!0)}))}}const Fe={class:"app-main"},$e=r("h1",null,"首页",-1),He=["src"],Ne=r("br",null,null,-1),Ge=["src"],ze=["src"],qe=_(" 只能在localhost或者https下才能使用该功能 "),Je=r("button",{style:{width:"100px",height:"30px","text-align":"center","line-height":"30px",color:"red"}},"拍-拍-照",-1),Ve=["src"],Qe=a({__name:"index",setup(e){const{succesTip:t}=L(),a=i(),o=i(),s=i(),u=i(13),d=i(),m=i([{id:1,name:"海报"},{id:2,name:"毛玻璃"},{id:3,name:"头像裁剪"},{id:4,name:"图形验证码"},{id:5,name:"签字板"},{id:6,name:"文字绘图"},{id:7,name:"网站摄像头"},{id:8,name:"图片标注"},{id:9,name:"轮盘抽奖"},{id:10,name:"梅花背景"},{id:11,name:"九宫格抽奖"},{id:12,name:"刮刮乐"},{id:13,name:"视频播放"}]),f=g({gift:5,number:5,list:[]}),w=[[{x:0,y:0,width:236,height:428,url:"https://fastly.jsdelivr.net/npm/@vant/assets/sand.jpeg",type:"image",name:"baseImg"},{x:180,y:375,width:45,height:45,type:"image",name:"qrcode",url:"https://www.baidu.com"},{x:10,y:400,name:"link",type:"text",url:"https://www.baidu.com",color:"white",font:"26px Arial"}]];P((async()=>{let e=new Oe(w);const t=await e.drawAll();a.value=t[0],Ue("https://www.baidu.com").then((e=>{s.value=e}))}));const b=i("首页测试g-tsx组件"),y=i([{type:"p",value:"这里是p标签"},{type:"button",value:"这里是el-button标签",attrs:{type:"primary"}},{type:"slot",value:"这里是slot标签",prop:"form-slot"}]),x=e=>{},k=e=>{},C=e=>{t("恭喜您，获得了"+e.name),f.number-=1,f.gift=B(0,7)},_=e=>{},I=e=>{o.value=e.baseUrl};return(e,t)=>{const i=We,g=U,w=O,P=Ee,T=Le,M=De,D=Me,Y=Ce,X=ke,B=ge,A=ie,L=ee,E=K,W=J,F=z;return l(),n("div",Fe,[$e,S(i,{text:b.value,"onUpdate:text":t[0]||(t[0]=e=>b.value=e),tsxList:y.value,onGetInfo:x},{"form-slot":j((({item:e})=>[r("div",null,"slot插槽--data:"+c(e.value),1)])),_:1},8,["text","tsxList"]),S(w,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e)},{default:j((()=>[(l(!0),n(p,null,v(m.value,(e=>(l(),R(g,{key:e.id,name:e.id,label:e.name},null,8,["name","label"])))),128))])),_:1},8,["modelValue"]),1==u.value?(l(),n(p,{key:0},[a.value?(l(),n("img",{key:0,src:a.value,title:"海报",style:{width:"300px"}},null,8,He)):h("",!0),Ne,s.value?(l(),n("img",{key:1,src:s.value,title:"二维码",style:{width:"100px"}},null,8,Ge)):h("",!0)],64)):h("",!0),2==u.value?(l(),R(P,{key:1,x:100,y:100,width:200,height:200,url:"https://gem530.github.io/img/33.jpg"})):h("",!0),3==u.value?(l(),R(T,{key:2,x:150,y:150,width:300,rotate:90,height:300,maxScale:3,minScale:.01,clipWidth:80,clipHeight:80,scaleStep:.01,maskColor:"rgba(0, 0, 0, 0.5)",onGetImg:k},null,8,["minScale","scaleStep"])):h("",!0),4==u.value?(l(),R(M,{key:3,num:"2357"})):h("",!0),5==u.value?(l(),n(p,{key:4},[S(D,{url:d.value,"onUpdate:url":t[2]||(t[2]=e=>d.value=e),width:"300px",height:"300px"},null,8,["url"]),d.value?(l(),n("img",{key:0,src:d.value,alt:""},null,8,ze)):h("",!0)],64)):h("",!0),6==u.value?(l(),R(Y,{key:5})):h("",!0),7==u.value?(l(),n(p,{key:6},[qe,S(X,{width:500,height:300,onGetPhotoBlob:I},{default:j((()=>[Je])),_:1}),o.value?(l(),n("img",{key:0,src:o.value,title:"照片"},null,8,Ve)):h("",!0)],64)):h("",!0),8==u.value?(l(),R(B,{key:7,width:300,height:300,onGetImg:k})):h("",!0),9==u.value?(l(),R(A,{key:8})):h("",!0),10==u.value?(l(),R(L,{key:9})):h("",!0),11==u.value?(l(),R(E,{key:10,gift:f.gift,list:f.list,width:350,height:350,number:f.number,onLuckResult:C},null,8,["gift","list","number"])):h("",!0),12==u.value?(l(),R(W,{key:11,maxArea:20,width:"300px",height:"400px",url:"https://d1.faiusr.com/4/AAEIABAEGAAgtZ-56QUoufyr5gQw9gE4kwM.png",onGetResult:_})):h("",!0),13==u.value?(l(),R(F,{key:12,width:"350px",height:"500px",url:"https://gem530.github.io/img/testVideo.mp4"})):h("",!0),13==u.value?(l(),R(F,{key:13,width:"550px",height:"300px",url:"https://gem530.github.io/img/testVideo2.mp4"})):h("",!0)])}}});export{Qe as default};

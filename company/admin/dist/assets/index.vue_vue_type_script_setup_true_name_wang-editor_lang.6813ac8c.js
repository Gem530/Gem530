import{u as e}from"./base.cc75b0f9.js";import{T as a,E as l}from"./@wangeditor.6de03d2f.js";import{k as s,s as o,j as d,C as t,o as i,c as m,W as n,u,F as r,Z as p,g as f}from"./@vue.df4a0536.js";const g={style:{border:"1px solid #000"}},c=s({__name:"index",props:{height:{default:300},fileSize:{default:10},fileType:{default:()=>["png","jpg","gif","jpeg"]},modelValue:{default:""}},emits:["update:modelValue"],setup(s,{emit:c}){const y=s,{proxy:h}=f(),$="default",V={excludeKeys:["uploadVideo"]},j=o(),x={placeholder:"请输入内容...",MENU_CONF:{}},v=d({get:()=>y.modelValue,set(e){c("update:modelValue",e)}});x.MENU_CONF.uploadImage={customUpload(a,l){(a=>new Promise(((l,s)=>{const o=a.name.slice(a.name.lastIndexOf(".")+1);if(!y.fileType.includes(o))return h.$modal.message({type:"error",message:`文件格式不正确, 请上传${y.fileType.join("/")}图片格式文件!`}),!1;if(!(a.size/1024/1024<y.fileSize))return h.$modal.message({type:"error",message:`上传图片大小不能超过 ${y.fileSize} MB!`}),!1;const d=new FormData;d.append("file",a),d.append("fileTo",""),h.$modal.loading(),e(d).then((e=>{h.$modal.closeLoading(),h.$modal.message({type:"success",message:"上传成功"}),l(e)})).catch((e=>{h.$modal.closeLoading(),h.$modal.message({type:"error",message:"上传失败"}),s(e)}))})))(a).then((e=>{l(e.data,e.name||"图片",e.data)}))}},t((()=>{const{value:e}=j;null!==e&&e.destroy()}));const C=e=>{j.value=e};return(e,s)=>(i(),m("div",g,[n(u(a),{mode:$,editor:u(j),defaultConfig:V},null,8,["editor"]),n(u(l),{mode:$,modelValue:u(v),"onUpdate:modelValue":s[0]||(s[0]=e=>r(v)?v.value=e:null),defaultConfig:x,style:p({height:y.height+"px","overflow-y":"hidden"}),onOnCreated:C},null,8,["modelValue","style"])]))}});export{c as _};

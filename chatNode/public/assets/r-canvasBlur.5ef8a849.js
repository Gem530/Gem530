var P=Object.defineProperty,U=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var C=(d,e,r)=>e in d?P(d,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):d[e]=r,w=(d,e)=>{for(var r in e||(e={}))$.call(e,r)&&C(d,r,e[r]);if(B)for(var r of B(e))q.call(e,r)&&C(d,r,e[r]);return d},y=(d,e)=>U(d,V(e));import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";import{d as b,a as L,l as M,o as j,e as k,m as O,f as R}from"./@vue.e9e6dad2.js";const S={name:"gCanvasBlur"},W=b(y(w({},S),{props:{x:{default:0},y:{default:0},url:{default:"https://gem530.github.io/img/33.jpg"},width:{default:200},height:{default:200}},setup(d){const e=d,r=L();M(async()=>{const h=await D(e.url);E(h,e.x,e.y,e.width,e.height)});const D=h=>{const o=h;return new Promise((u,f)=>{let a=new Image;a.crossOrigin="anonymous",a.src=o,a.onload=n=>{u(a)},a.onerror=()=>{f()}})},E=(h,o,u,f,a)=>{const n=document.createElement("canvas");let s=n.getContext("2d");const c=r.value.clientWidth,_=r.value.clientHeight;n.width=c,n.height=_,s.drawImage(h,0,0,c,_);let g=s.getImageData(o,u,f,a),m=N(g);s.putImageData(m,o,u);let v=n.toDataURL("image/jpeg"),t=new Image;t.src=v,r.value.appendChild(t)},N=h=>{let o=h.data,u=h.width,f=h.height;var a=[],n=0,s,c,_,g,m,v,t,i,p,I;let l=10,x=5;for(v=1/(Math.sqrt(2*Math.PI)*x),m=-1/(2*x*x),t=0,s=-l;s<=l;s++,t++)g=v*Math.exp(m*s*s),a[t]=g,n+=g;for(t=0,I=a.length;t<I;t++)a[t]/=n;for(c=0;c<f;c++)for(s=0;s<u;s++){for(_=g=m=v=0,n=0,i=-l;i<=l;i++)p=s+i,p>=0&&p<u&&(t=(c*u+p)*4,_+=o[t]*a[i+l],g+=o[t+1]*a[i+l],m+=o[t+2]*a[i+l],n+=a[i+l]);t=(c*u+s)*4,o[t]=_/n,o[t+1]=g/n,o[t+2]=m/n}for(s=0;s<u;s++)for(c=0;c<f;c++){for(_=g=m=v=0,n=0,i=-l;i<=l;i++)p=c+i,p>=0&&p<f&&(t=(p*u+s)*4,_+=o[t]*a[i+l],g+=o[t+1]*a[i+l],m+=o[t+2]*a[i+l],n+=a[i+l]);t=(c*u+s)*4,o[t]=_/n,o[t+1]=g/n,o[t+2]=m/n}return h};return(h,o)=>(j(),k("div",{class:"component theme",ref_key:"box",ref:r},null,512))}}));var z=H(W,[["__scopeId","data-v-68684a51"]]);const A={class:"contanir theme"},F={style:{width:"400px",height:"714px"}},G={name:"canvasBlur"},T=b(y(w({},G),{setup(d){return M(()=>{}),(e,r)=>(j(),k("div",A,[O("div",F,[R(z,{x:200,y:200,url:"https://gem530.github.io/img/33.jpg",width:200,height:200})])]))}}));export{T as default};

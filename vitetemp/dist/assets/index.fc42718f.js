var T=Object.defineProperty,I=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var D=(r,s,o)=>s in r?T(r,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[s]=o,x=(r,s)=>{for(var o in s||(s={}))O.call(s,o)&&D(r,o,s[o]);if(B)for(var o of B(s))C.call(s,o)&&D(r,o,s[o]);return r},y=(r,s)=>I(r,A(s));import{_ as P}from"./plugin-vue_export-helper.21dcd24c.js";import{d as U,a as h,r as W,w as E,n as p,c as $,l as z,I as J,o as u,e as c,B as Q,x as H,m as d,z as f,u as i,F as V,v as G,J as j,D as q}from"./@vue.fb42abb7.js";const K={class:"component theme"},R={class:"pull"},X={name:"g-wirless-list"},Z=U(y(x({},X),{props:{list:{default:()=>[]},height:{default:"100%"},itemHeight:{default:20}},emits:["dropDown","pullUp"],setup(r,{expose:s,emit:o}){const l=r,a=h(),v=h(),m=h(),e=W({start:0,moveY:0,startY:0,showNum:0,pullFlag:0,bottomPx:30,referFlag:0,referHeight:0,isMobile:!0,trueFlag:!1,isLoading:!0});E(()=>e.isLoading,(t,n)=>{n===!1&&t===!0&&p(()=>{g()})},{deep:!0}),E(()=>l.list,(t,n)=>{p(()=>{S()})},{deep:!0,immediate:!0});const Y=$(()=>l.list.slice(e.start,e.start+e.showNum));navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?e.isMobile=!0:e.isMobile=!1,z(()=>{const t=a.value.clientHeight;e.showNum=Math.round(t/l.itemHeight)+3,w(),e.isMobile?(window.addEventListener("touchend",L,{passive:!1}),window.addEventListener("touchmove",F,{passive:!1}),window.addEventListener("touchstart",_,{passive:!1})):(window.addEventListener("mouseup",L),window.addEventListener("mousemove",F),window.addEventListener("mousedown",_)),g()});const S=()=>{v.value.style.height=l.list.length*l.itemHeight+"px"},w=()=>{const t=Math.round(a.value.scrollTop);e.start=Math.round(t/l.itemHeight),m.value.style.top=t+"px"},g=()=>{p(()=>{a.value.scrollHeight-a.value.scrollTop-5<=a.value.clientHeight&&b()})},_=t=>{t=t||window.event,!(!e.isMobile&&!a.value.contains(t.target))&&(e.startY=e.isMobile?t.touches[0].pageY:t.pageY,e.trueFlag=!0)},F=t=>{if(t=t||window.event,!a.value.contains(t.target))return;a.value.scrollTop<1&&e.trueFlag&&(e.moveY=(e.isMobile?t.touches[0].pageY:t.pageY)-e.startY,e.moveY>0&&(t.preventDefault(),e.referFlag=1,e.moveY>80&&(e.referHeight=80)))},L=()=>{e.trueFlag=!1,e.moveY>0&&(e.referFlag=2,o("dropDown"))},b=()=>{e.isLoading&&(e.isLoading=!1,o("pullUp"))};return s({noMoreData:()=>{e.pullFlag=1},pullSuccess:()=>{e.pullFlag=0,e.isLoading=!0,e.referFlag=3,e.referHeight=0,g()},loadmoreSuccess:()=>{e.isLoading=!0}}),(t,n)=>{const N=J("loadmores");return u(),c("div",K,[Q((u(),c("div",{ref_key:"box",ref:a,class:"box",style:H(`height: ${l.height};`),onScroll:w},[d("div",{style:H(`height: ${i(e).referHeight}px;`),class:"refersh"},f(i(e).referFlag===1?"\u677E\u5F00\u624B\u6307\u5373\u53EF\u5237\u65B0":i(e).referFlag===2?"\u6B63\u5728\u52A0\u8F7D\u4E2D...":"\u5237\u65B0\u6210\u529F"),5),d("div",{class:"scroll-bar",ref_key:"scrollBar",ref:v},null,512),d("div",{class:"scroll-list",ref_key:"scrollList",ref:m},[(u(!0),c(V,null,G(i(Y),(M,k)=>(u(),c("div",{key:k},[j(t.$slots,"default",{item:M},()=>[q(f(M),1)],!0)]))),128))],512),d("div",R,f(i(e).pullFlag===1?"\u6CA1\u6709\u66F4\u591A\u4E86":"\u52A0\u8F7D\u4E2D..."),1)],36)),[[N,b]])])}}}));var le=P(Z,[["__scopeId","data-v-1fed7368"]]);export{le as g};

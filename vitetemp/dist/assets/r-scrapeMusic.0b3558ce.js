var T=Object.defineProperty,k=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var x=(l,s,n)=>s in l?T(l,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[s]=n,d=(l,s)=>{for(var n in s||(s={}))R.call(s,n)&&x(l,n,s[n]);if(_)for(var n of _(s))M.call(s,n)&&x(l,n,s[n]);return l},g=(l,s)=>k(l,P(s));import{d as y,a as m,y as b,o as A,g as B,l as S,q as C,x as L}from"./@vue.a7176b8e.js";const E=["src"],I={name:"g-scrape-music"},X=y(g(d({},I),{props:{url:{default:""},width:{default:"300px"},height:{default:"300px"},maxArea:{default:30}},emits:["getResult"],setup(l,{emit:s}){const n=l,h=m(),i=m();let p=m(!0);navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?p.value=!0:p.value=!1,b(()=>{console.log("onMounted"),i.value.readyState==="complete"?v():i.value.onload=function(){v()}});const v=()=>{const e=document.createElement("canvas");e.width=i.value.width,e.height=i.value.height,e.style.position="absolute",e.style.zIndex=2,e.style.left=i.value.offsetLeft+"px",e.style.top=i.value.offsetTop+"px",i.value.parentNode.insertBefore(e,i.value);let t=e.getContext("2d");t.fillStyle="#bbb",t.fillRect(0,0,i.value.width,i.value.height),t.globalCompositeOperation="destination-out",t.strokeStyle="#eee",t.lineWidth=30,t.lineCap="round";const c=h.value.getBoundingClientRect().top,r=h.value.getBoundingClientRect().left;p.value?e.ontouchstart=function(a){let f=a.touches[0].pageX-e.offsetLeft-r,u=a.touches[0].pageY-e.offsetTop-c;t.beginPath(),t.arc(f,u,15,0,6.3,!1),t.fill(),e.ontouchmove=function(o){o=o||window.event,o.preventDefault(),t.beginPath(),t.moveTo(f,u),t.lineTo(o.touches[0].pageX-e.offsetLeft-r,o.touches[0].pageY-e.offsetTop-c),f=o.touches[0].pageX-e.offsetLeft-r,u=o.touches[0].pageY-e.offsetTop-c,t.stroke()},document.ontouchend=function(){e.onmousemove=null,this.onmouseup=null,w()}}:e.onmousedown=function(a){a=a||window.event;let f=a.pageX-e.offsetLeft-r,u=a.pageY-e.offsetTop-c;t.beginPath(),t.arc(f,u,15,0,6.3,!1),t.fill(),e.onmousemove=function(o){o=o||window.event,o.preventDefault(),t.beginPath(),t.moveTo(f,u),t.lineTo(o.pageX-e.offsetLeft-r,o.pageY-e.offsetTop-c),f=o.pageX-e.offsetLeft-r,u=o.pageY-e.offsetTop-c,t.stroke()},document.onmouseup=function(){e.onmousemove=null,this.onmouseup=null,w()}};const w=()=>{let a=t.getImageData(0,0,e.width,e.height).data,f=0;for(let o=0;o<a.length;o+=4)a[o]==0&&a[o+1]==0&&a[o+2]==0&&a[o+3]==0&&f++;let u=f*100/(e.width*e.height);u>n.maxArea&&(t.beginPath(),t.fillRect(0,0,e.width,e.height)),s("getResult",{currentArea:u,isSuccess:u>n.maxArea})}};return(e,t)=>(A(),B("div",{class:"component theme",ref_key:"box",ref:h},[S("img",{ref_key:"oImg",ref:i,src:n.url,style:C(`width: ${n.width};height: ${n.height};`)},null,12,E)],512))}})),Y={class:"contanir theme"},$={name:"scrapeMusic"},D=y(g(d({},$),{setup(l){b(()=>{console.log("onMounted")});const s=n=>{console.log("getResult",n)};return(n,h)=>(A(),B("div",Y,[L(X,{url:"https://d1.faiusr.com/4/AAEIABAEGAAgtZ-56QUoufyr5gQw9gE4kwM.png",width:"300px",height:"400px",maxArea:20,onGetResult:s})]))}}));export{D as default};

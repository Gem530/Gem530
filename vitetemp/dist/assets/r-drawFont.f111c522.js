var P=Object.defineProperty,S=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var w=(s,a,u)=>a in s?P(s,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):s[a]=u,p=(s,a)=>{for(var u in a||(a={}))z.call(a,u)&&w(s,u,a[u]);if(C)for(var u of C(a))$.call(a,u)&&w(s,u,a[u]);return s},l=(s,a)=>S(s,k(a));import{d as B,a as d,r as N,l as m,o as M,e as X,v as Y,x as R,L as W,f as V}from"./@vue.10c5446f.js";import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";const O={name:"g-draw-font"},Q=B(l(p({},O),{props:{text:{default:"\u5BCC\u5F3A\u3001\u6C11\u4E3B\u3001\u6587\u660E\u3001\u548C\u8C10\u3001\u81EA\u7531\u3001\u5E73\u7B49\u3001\u516C\u6B63\u3001\u6CD5\u6CBB\u3001\u7231\u56FD\u3001\u656C\u4E1A\u3001\u8BDA\u4FE1\u3001\u53CB\u5584\u3001"}},setup(s){const a=s,u=d(),r=d(),e=N({canvas:null,ctx:null,width:0,height:0,text:"",textIndex:0,fontSize:5,isPc:!0,downFlag:!1,point:{pageX:0,pageY:0}});m(()=>{navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?e.isPc=!1:e.isPc=!0,e.width=600,e.height=600,E()});const E=()=>{e.canvas=u,e.ctx=e.canvas.getContext("2d"),e.canvas.width=e.width,e.canvas.height=e.height},c=n=>{let t={pageX:0,pageY:0};if(e.isPc)t={pageX:n.pageX,pageY:n.pageY};else{const o=n;t={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY}}return t},g=n=>{const t=c(n);e.downFlag=!0,e.point={pageX:t.pageX,pageY:t.pageY}},x=n=>{if(!e.downFlag)return;const t=c(n),o=e.ctx,b=r.value.getBoundingClientRect().top,D=r.value.getBoundingClientRect().left,h=y(t,e.point),_=a.text[e.textIndex],v=e.fontSize+h/2,T=A(v,_);var I=Math.atan2(t.pageY-e.point.pageY,t.pageX-e.point.pageX);h>T&&(o.font=v+"px Arial",o.fillStyle=F(),o.save(),o.translate(e.point.pageX-D,e.point.pageY-b),o.rotate(I),o.fillText(_,0,0),o.restore(),e.textIndex=e.textIndex>=a.text.length-1?0:e.textIndex+1,e.point={pageX:t.pageX,pageY:t.pageY})},f=n=>{c(n),e.downFlag=!1,e.textIndex=0},F=()=>{const n=i(0,255),t=i(0,255),o=i(0,255);return`rgb(${n},${t},${o})`},i=(n,t)=>Math.floor(Math.random()*(t-n)+n),y=(n,t)=>Math.sqrt(Math.pow(t.pageX-n.pageX,2)+Math.pow(t.pageY-n.pageY,2)),A=(n,t)=>{const o=e.ctx;if(o.font=n+"px Arial",o.fillText)return o.measureText(t).width;if(o.mozDrawText)return o.mozMeasureText(t)};return(n,t)=>(M(),X("div",{class:"component theme",ref_key:"box",ref:r},[Y("canvas",{class:"myCanvas",ref_key:"myCanvasRef",ref:u,onMousedown:g,onMousemove:x,onMouseup:f,onTouchStart:g,onTouchMove:x,onTouchEnd:f},null,544)],512))}}));var U=L(Q,[["__scopeId","data-v-a2b8385a"]]);const q={class:"contanir theme"},G={name:"drawFont"},K=B(l(p({},G),{setup(s){const a=d("\u5BCC\u5F3A\u3001\u6C11\u4E3B\u3001\u6587\u660E\u3001\u548C\u8C10\u3001\u81EA\u7531\u3001\u5E73\u7B49\u3001\u516C\u6B63\u3001\u6CD5\u6CBB\u3001\u7231\u56FD\u3001\u656C\u4E1A\u3001\u8BDA\u4FE1\u3001\u53CB\u5584\u3001");return m(()=>{}),(u,r)=>(M(),X("div",q,[R(Y("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=e=>a.value=e),style:{width:"100%"}},null,512),[[W,a.value]]),V(U,{text:a.value},null,8,["text"])]))}}));export{K as default};

var Y=Object.defineProperty,y=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var F=(r,t,s)=>t in r?Y(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,g=(r,t)=>{for(var s in t||(t={}))A.call(t,s)&&F(r,s,t[s]);if(w)for(var s of w(t))H.call(t,s)&&F(r,s,t[s]);return r},h=(r,t)=>y(r,k(t));import{_ as N}from"./index.8485d9ac.js";import{d as E,a as L,r as B,w as O,A as M,n as D,P,o as n,g as l,m as T,x as b,l as x,t as v,u as i,O as C,z as I,E as $,F as U,j as R}from"./@vue.fa2a0fcd.js";import"./vuex.53515dac.js";import"./vue-router.e61f4c82.js";import"./vuex-persistedstate.fa252374.js";const z={class:"component theme"},Q={class:"pull"},V={name:"g-refersh"},W=E(h(g({},V),{props:{height:{default:"100%"}},emits:["dropDown","pullUp"],setup(r,{expose:t,emit:s}){const p=r,a=L(),e=B({moveY:0,startY:0,pullFlag:0,bottomPx:30,referFlag:0,referHeight:0,isMobile:!0,trueFlag:!1,isLoading:!0});O(()=>e.isLoading,(o,f)=>{f===!1&&o===!0&&D(()=>{u()})},{deep:!0}),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?e.isMobile=!0:e.isMobile=!1,M(()=>{window.addEventListener("mouseup",m),window.addEventListener("mousemove",d),window.addEventListener("mousedown",c),window.addEventListener("touchend",m,{passive:!1}),window.addEventListener("touchmove",d,{passive:!1}),window.addEventListener("touchstart",c,{passive:!1}),u()});const u=()=>{D(()=>{a.value.scrollHeight-a.value.scrollTop-5<=a.value.clientHeight&&_()})},c=o=>{o=o||window.event,a.value.contains(o.target)&&(e.startY=e.isMobile?o.touches[0].pageY:o.pageY,e.trueFlag=!0)},d=o=>{if(o=o||window.event,!a.value.contains(o.target))return;a.value.scrollTop<1&&e.trueFlag&&(e.moveY=(e.isMobile?o.touches[0].pageY:o.pageY)-e.startY,e.moveY>0&&(o.preventDefault(),e.referFlag=1,e.moveY>80&&(e.referHeight=80)))},m=()=>{e.trueFlag=!1,e.moveY>0&&(e.referFlag=2,s("dropDown"))},_=()=>{e.isLoading&&(e.isLoading=!1,s("pullUp"))};return t({noMoreData:()=>{e.pullFlag=1},pullSuccess:()=>{e.pullFlag=0,e.isLoading=!0,e.referFlag=3,e.referHeight=0,u()},loadmoreSuccess:()=>{e.isLoading=!0}}),(o,f)=>{const S=P("loadmores");return n(),l("div",z,[T((n(),l("div",{ref_key:"box",ref:a,class:"box",style:b(`height: ${p.height};`)},[x("div",{style:b(`height: ${i(e).referHeight}px;`),class:"refersh"},v(i(e).referFlag===1?"\u677E\u5F00\u624B\u6307\u5373\u53EF\u5237\u65B0":i(e).referFlag===2?"\u6B63\u5728\u52A0\u8F7D\u4E2D...":"\u5237\u65B0\u6210\u529F"),5),C(o.$slots,"default",{},void 0,!0),x("div",Q,v(i(e).pullFlag===1?"\u6CA1\u6709\u66F4\u591A\u4E86":"\u52A0\u8F7D\u4E2D..."),1)],4)),[[S,_]])])}}}));var j=N(W,[["__scopeId","data-v-2a3b3758"]]);const G={class:"contanir theme"},J={name:"refersh"},ae=E(h(g({},J),{setup(r){const t=L(),s=B({list:[1,2,3,4,5,6,7,8,9,10]});M(()=>{});const p=()=>{setTimeout(()=>{s.list=[1,2,3,4,5,6,7,8,9,10],t.value.pullSuccess()},1e3)},a=()=>{s.list=[...s.list,1,2,3,4,5,6,7,8,9,10],setTimeout(()=>{s.list.length>50?t.value.noMoreData():t.value.loadmoreSuccess()},1e3)};return(e,u)=>(n(),l("div",G,[I(j,{ref_key:"refershRef",ref:t,height:"500px",onDropDown:p,onPullUp:a},{default:$(()=>[(n(!0),l(U,null,R(i(s).list,(c,d)=>(n(),l("div",{key:d},v(c),1))),128))]),_:1},512)]))}}));export{ae as default};

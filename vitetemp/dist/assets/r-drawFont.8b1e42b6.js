var P=Object.defineProperty,S=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var m=(s,o,u)=>o in s?P(s,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):s[o]=u,p=(s,o)=>{for(var u in o||(o={}))k.call(o,u)&&m(s,u,o[u]);if(C)for(var u of C(o))N.call(o,u)&&m(s,u,o[u]);return s},l=(s,o)=>S(s,z(o));import{d as w,a as d,r as $,A as B,o as M,g as X,l as Y,m as R,N as W,z as V}from"./@vue.fa2a0fcd.js";import{_ as O}from"./index.8485d9ac.js";import"./vuex.53515dac.js";import"./vue-router.e61f4c82.js";import"./vuex-persistedstate.fa252374.js";const Q={name:"g-draw-font"},U=w(l(p({},Q),{props:{text:{default:"\u5BCC\u5F3A\u3001\u6C11\u4E3B\u3001\u6587\u660E\u3001\u548C\u8C10\u3001\u81EA\u7531\u3001\u5E73\u7B49\u3001\u516C\u6B63\u3001\u6CD5\u6CBB\u3001\u7231\u56FD\u3001\u656C\u4E1A\u3001\u8BDA\u4FE1\u3001\u53CB\u5584\u3001"}},setup(s){const o=s,u=d(),r=d(),e=$({canvas:null,ctx:null,width:0,height:0,text:"",textIndex:0,fontSize:5,isPc:!0,downFlag:!1,point:{pageX:0,pageY:0}});B(()=>{navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?e.isPc=!1:e.isPc=!0,e.width=600,e.height=600,E()});const E=()=>{e.canvas=u,e.ctx=e.canvas.getContext("2d"),e.canvas.width=e.width,e.canvas.height=e.height},c=n=>{let t={pageX:0,pageY:0};if(e.isPc)t={pageX:n.pageX,pageY:n.pageY};else{const a=n;t={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY}}return t},g=n=>{const t=c(n);e.downFlag=!0,e.point={pageX:t.pageX,pageY:t.pageY}},x=n=>{if(!e.downFlag)return;const t=c(n),a=e.ctx,b=r.value.getBoundingClientRect().top,D=r.value.getBoundingClientRect().left,h=F(t,e.point),_=o.text[e.textIndex],v=e.fontSize+h/2,T=y(v,_);var I=Math.atan2(t.pageY-e.point.pageY,t.pageX-e.point.pageX);h>T&&(a.font=v+"px Arial",a.fillStyle=A(),a.save(),a.translate(e.point.pageX-D,e.point.pageY-b),a.rotate(I),a.fillText(_,0,0),a.restore(),e.textIndex=e.textIndex>=o.text.length-1?0:e.textIndex+1,e.point={pageX:t.pageX,pageY:t.pageY})},f=n=>{c(n),e.downFlag=!1,e.textIndex=0},A=()=>{const n=i(0,255),t=i(0,255),a=i(0,255);return`rgb(${n},${t},${a})`},i=(n,t)=>Math.floor(Math.random()*(t-n)+n),F=(n,t)=>Math.sqrt(Math.pow(t.pageX-n.pageX,2)+Math.pow(t.pageY-n.pageY,2)),y=(n,t)=>{const a=e.ctx;if(a.font=n+"px Arial",a.fillText)return a.measureText(t).width;if(a.mozDrawText)return a.mozMeasureText(t)};return(n,t)=>(M(),X("div",{class:"component theme",ref_key:"box",ref:r},[Y("canvas",{class:"myCanvas",ref_key:"myCanvasRef",ref:u,onMousedown:g,onMousemove:x,onMouseup:f,onTouchStart:g,onTouchMove:x,onTouchEnd:f},null,544)],512))}}));var q=O(U,[["__scopeId","data-v-a2b8385a"]]);const G={class:"contanir theme"},J={name:"drawFont"},te=w(l(p({},J),{setup(s){const o=d("\u5BCC\u5F3A\u3001\u6C11\u4E3B\u3001\u6587\u660E\u3001\u548C\u8C10\u3001\u81EA\u7531\u3001\u5E73\u7B49\u3001\u516C\u6B63\u3001\u6CD5\u6CBB\u3001\u7231\u56FD\u3001\u656C\u4E1A\u3001\u8BDA\u4FE1\u3001\u53CB\u5584\u3001");return B(()=>{}),(u,r)=>(M(),X("div",G,[R(Y("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=e=>o.value=e),style:{width:"100%"}},null,512),[[W,o.value]]),V(q,{text:o.value},null,8,["text"])]))}}));export{te as default};

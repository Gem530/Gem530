var e=Object.defineProperty,r=Object.defineProperties,s=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(r,s,t)=>s in r?e(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t;import{d as n,r as c,l as p,o as d,e as u,m,u as f,F as l,v as g,y,z as h,B as b,O as v}from"./@vue.0069b3ae.js";import{u as j}from"./vuex.cf57797f.js";import{u as O}from"./vue-router.8c9b9931.js";import{u as x,h as L}from"./index.b27fe81c.js";import{G as k}from"./index.234c1285.js";import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";import"./axios.e7b69eb3.js";import"./index.1103ad6c.js";import"./vuex-persistedstate.fa252374.js";const N={class:"contanir theme"},_={class:"friend-list"},P=["onClick"],w={key:1,class:"friend-empty"},C=n((E=((e,r)=>{for(var s in r||(r={}))o.call(r,s)&&i(e,s,r[s]);if(t)for(var s of t(r))a.call(r,s)&&i(e,s,r[s]);return e})({},{name:"createGroup"}),r(E,s({setup(e){const r=j();O();const s=c({groupName:"",userId:r.getters.user.userId,friendList:[],friendRequestList:[]});p((()=>{})),x(s.userId).then((e=>{s.friendList=e.data,s.friendList.forEach((e=>{e.choose=!1}))})).catch((e=>{k({type:"error",message:"获取好友列表失败："+e.message})}));const t=()=>{const e=(()=>{const e=s.friendList.filter((e=>e.choose));let r="";return s.groupName?e.length||(r="请输入选择群成员"):r="请输入群名",r})();if(e)return void k({type:"error",message:e});const t=s.friendList.filter((e=>e.choose)).map((e=>({id:e.friend_id,type:0})));t.push({id:r.getters.user.userId,type:1});const o={groupName:s.groupName,members:t};L(o).then((e=>{k({type:"success",message:"建群成功"})})).catch((e=>{k({type:"error",message:"建群成功失败："+e.message})}))};return(e,r)=>(d(),u("div",N,[m("div",_,[f(s).friendList.length?(d(!0),u(l,{key:0},g(f(s).friendList,(e=>(d(),u("div",{key:e.friend_id,class:y({"friend-item":!0,active:e.choose}),onClick:r=>(e=>{e.choose=!e.choose})(e)},h(e.name),11,P)))),128)):(d(),u("div",w,"没有更多了"))]),b(m("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=e=>f(s).groupName=e),placeholder:"请输入群名"},null,512),[[v,f(s).groupName]]),m("button",{onClick:t},"建群")]))}}))));var E,G=I(C,[["__scopeId","data-v-74e79c13"]]);export{G as default};

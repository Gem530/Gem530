var A=Object.defineProperty,M=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var g=(n,e,t)=>e in n?A(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_=(n,e)=>{for(var t in e||(e={}))j.call(e,t)&&g(n,t,e[t]);if(d)for(var t of d(e))D.call(e,t)&&g(n,t,e[t]);return n},h=(n,e)=>M(n,T(e));import{_ as E}from"./index.be58f898.js";import{d as f,a as p,r as m,y as v,n as z,o as y,g as x,l as w,x as C,u as V}from"./@vue.a7176b8e.js";import"./vuex.5b78a150.js";import"./vue-router.760322c3.js";import"./vuex-persistedstate.fa252374.js";const $={name:"g-poster"},H=f(h(_({},$),{props:{list:null},setup(n){const e=n,t=p(),r=p(),i=m({width:0,height:0});v(()=>{console.log("onMounted"),i.width=r.value.clientWidth,i.height=r.value.clientHeight,t.value.width=i.width,t.value.height=i.height,z(()=>{P()})});const P=()=>{const s=t.value.getContext("2d");e.list.forEach(async a=>{a.type==="image"&&await b(s,a.url,a.x,a.y,a.width,a.height),a.type==="text"&&await k(s,a.url,a.x,a.y)})},b=(s,a,c,l,u,B)=>new Promise((I,N)=>{const o=new Image;o.crossorigin="Anonymous",o.src=a,o.onload=()=>{s.beginPath(),s.drawImage(o,c,l,u,B),I(!0)},o.onerror=()=>{N()}}),k=(s,a,c,l)=>new Promise(u=>{setTimeout(()=>{s.beginPath(),s.fillStyle="#fff",s.zIndex="999",s.fillText(a,c,l),u(!0)},30)});return(s,a)=>(y(),x("div",{class:"canvas-box component theme",ref_key:"canvasParent",ref:r},[w("canvas",{id:"mycanvas",ref_key:"canvas",ref:t},null,512)],512))}}));var S=E(H,[["__scopeId","data-v-b4f107dc"]]);const W={class:"contanir theme"},X={style:{width:"400px",height:"710px"}},q={name:"poster"},Q=f(h(_({},q),{setup(n){const e=m({list:[{type:"image",url:"https://gem530.github.io/img/u=1819817697,2457372120&fm=26&fmt=auto&gp=0.jpg",x:0,y:0,width:400,height:714},{type:"image",url:"https://gem530.github.io/img/lADPD26eNnXBjezNAuPNAuM_739_739.jpg",x:10,y:630,width:70,height:70},{type:"text",url:"\u7ED8\u5236\u6587\u5B57",x:100,y:640}]});return v(()=>{console.log("onMounted")}),(t,r)=>(y(),x("div",W,[w("div",X,[C(S,{list:V(e).list},null,8,["list"])])]))}}));export{Q as default};

var P=Object.defineProperty,U=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var M=(d,e,r)=>e in d?P(d,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):d[e]=r,w=(d,e)=>{for(var r in e||(e={}))$.call(e,r)&&M(d,r,e[r]);if(B)for(var r of B(e))q.call(e,r)&&M(d,r,e[r]);return d},y=(d,e)=>U(d,V(e));import{_ as H}from"./index.be58f898.js";import{d as b,a as L,y as C,o as j,g as k,l as O,x as R}from"./@vue.a7176b8e.js";import"./vuex.5b78a150.js";import"./vue-router.760322c3.js";import"./vuex-persistedstate.fa252374.js";const S={name:"gCanvasBlur"},W=b(y(w({},S),{props:{x:{default:0},y:{default:0},url:{default:"https://gem530.github.io/img/33.jpg"},width:{default:200},height:{default:200}},setup(d){const e=d,r=L();C(async()=>{console.log("onMounted");const g=await D(e.url);E(g,e.x,e.y,e.width,e.height)});const D=g=>{const s=g;return new Promise((u,f)=>{let a=new Image;a.crossOrigin="anonymous",a.src=s,a.onload=n=>{u(a)},a.onerror=()=>{f()}})},E=(g,s,u,f,a)=>{const n=document.createElement("canvas");let o=n.getContext("2d");const c=r.value.clientWidth,_=r.value.clientHeight;n.width=c,n.height=_,o.drawImage(g,0,0,c,_);let h=o.getImageData(s,u,f,a),m=N(h);o.putImageData(m,s,u);let x=n.toDataURL("image/jpeg"),t=new Image;t.src=x,r.value.appendChild(t)},N=g=>{let s=g.data,u=g.width,f=g.height;var a=[],n=0,o,c,_,h,m,x,t,i,p,I;let l=10,v=5;for(x=1/(Math.sqrt(2*Math.PI)*v),m=-1/(2*v*v),t=0,o=-l;o<=l;o++,t++)h=x*Math.exp(m*o*o),a[t]=h,n+=h;for(t=0,I=a.length;t<I;t++)a[t]/=n;for(c=0;c<f;c++)for(o=0;o<u;o++){for(_=h=m=x=0,n=0,i=-l;i<=l;i++)p=o+i,p>=0&&p<u&&(t=(c*u+p)*4,_+=s[t]*a[i+l],h+=s[t+1]*a[i+l],m+=s[t+2]*a[i+l],n+=a[i+l]);t=(c*u+o)*4,s[t]=_/n,s[t+1]=h/n,s[t+2]=m/n}for(o=0;o<u;o++)for(c=0;c<f;c++){for(_=h=m=x=0,n=0,i=-l;i<=l;i++)p=c+i,p>=0&&p<f&&(t=(p*u+o)*4,_+=s[t]*a[i+l],h+=s[t+1]*a[i+l],m+=s[t+2]*a[i+l],n+=a[i+l]);t=(c*u+o)*4,s[t]=_/n,s[t+1]=h/n,s[t+2]=m/n}return g};return(g,s)=>(j(),k("div",{class:"component theme",ref_key:"box",ref:r},null,512))}}));var z=H(W,[["__scopeId","data-v-61cd2b62"]]);const A={class:"contanir theme"},F={style:{width:"400px",height:"714px"}},G={name:"canvasBlur"},Z=b(y(w({},G),{setup(d){return C(()=>{console.log("onMounted")}),(e,r)=>(j(),k("div",A,[O("div",F,[R(z,{x:200,y:200,url:"https://gem530.github.io/img/33.jpg",width:200,height:200})])]))}}));export{Z as default};

var Y=Object.defineProperty,y=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var F=(a,t,s)=>t in a?Y(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,v=(a,t)=>{for(var s in t||(t={}))H.call(t,s)&&F(a,s,t[s]);if(w)for(var s of w(t))N.call(t,s)&&F(a,s,t[s]);return a},h=(a,t)=>y(a,k(t));import{_ as P}from"./plugin-vue_export-helper.21dcd24c.js";import{d as B,a as E,r as L,w as T,n as D,l as M,Q as A,o as i,e as l,x as C,B as b,v as x,z as g,u as n,P as I,f as O,H as $,F as U,q as Q}from"./@vue.10c5446f.js";const R={class:"component theme"},z={class:"pull"},V={name:"g-refersh"},W=B(h(v({},V),{props:{height:{default:"100%"}},emits:["dropDown","pullUp"],setup(a,{expose:t,emit:s}){const f=a,r=E(),e=L({moveY:0,startY:0,pullFlag:0,bottomPx:30,referFlag:0,referHeight:0,isMobile:!0,trueFlag:!1,isLoading:!0});T(()=>e.isLoading,(o,p)=>{p===!1&&o===!0&&D(()=>{u()})},{deep:!0}),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?e.isMobile=!0:e.isMobile=!1,M(()=>{window.addEventListener("mouseup",_),window.addEventListener("mousemove",d),window.addEventListener("mousedown",c),window.addEventListener("touchend",_,{passive:!1}),window.addEventListener("touchmove",d,{passive:!1}),window.addEventListener("touchstart",c,{passive:!1}),u()});const u=()=>{D(()=>{r.value.scrollHeight-r.value.scrollTop-5<=r.value.clientHeight&&m()})},c=o=>{o=o||window.event,r.value.contains(o.target)&&(e.startY=e.isMobile?o.touches[0].pageY:o.pageY,e.trueFlag=!0)},d=o=>{if(o=o||window.event,!r.value.contains(o.target))return;r.value.scrollTop<1&&e.trueFlag&&(e.moveY=(e.isMobile?o.touches[0].pageY:o.pageY)-e.startY,e.moveY>0&&(o.preventDefault(),e.referFlag=1,e.moveY>80&&(e.referHeight=80)))},_=()=>{e.trueFlag=!1,e.moveY>0&&(e.referFlag=2,s("dropDown"))},m=()=>{e.isLoading&&(e.isLoading=!1,s("pullUp"))};return t({noMoreData:()=>{e.pullFlag=1},pullSuccess:()=>{e.pullFlag=0,e.isLoading=!0,e.referFlag=3,e.referHeight=0,u()},loadmoreSuccess:()=>{e.isLoading=!0}}),(o,p)=>{const S=A("loadmores");return i(),l("div",R,[C((i(),l("div",{ref_key:"box",ref:r,class:"box",style:b(`height: ${f.height};`)},[x("div",{style:b(`height: ${n(e).referHeight}px;`),class:"refersh"},g(n(e).referFlag===1?"\u677E\u5F00\u624B\u6307\u5373\u53EF\u5237\u65B0":n(e).referFlag===2?"\u6B63\u5728\u52A0\u8F7D\u4E2D...":"\u5237\u65B0\u6210\u529F"),5),I(o.$slots,"default",{},void 0,!0),x("div",z,g(n(e).pullFlag===1?"\u6CA1\u6709\u66F4\u591A\u4E86":"\u52A0\u8F7D\u4E2D..."),1)],4)),[[S,m]])])}}}));var q=P(W,[["__scopeId","data-v-2a3b3758"]]);const G={class:"contanir theme"},J={name:"refersh"},se=B(h(v({},J),{setup(a){const t=E(),s=L({list:[1,2,3,4,5,6,7,8,9,10]});M(()=>{});const f=()=>{setTimeout(()=>{s.list=[1,2,3,4,5,6,7,8,9,10],t.value.pullSuccess()},1e3)},r=()=>{s.list=[...s.list,1,2,3,4,5,6,7,8,9,10],setTimeout(()=>{s.list.length>50?t.value.noMoreData():t.value.loadmoreSuccess()},1e3)};return(e,u)=>(i(),l("div",G,[O(q,{ref_key:"refershRef",ref:t,height:"500px",onDropDown:f,onPullUp:r},{default:$(()=>[(i(!0),l(U,null,Q(n(s).list,(c,d)=>(i(),l("div",{key:d},g(c),1))),128))]),_:1},512)]))}}));export{se as default};

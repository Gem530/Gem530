var S=Object.defineProperty,y=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var F=(r,t,s)=>t in r?S(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,v=(r,t)=>{for(var s in t||(t={}))H.call(t,s)&&F(r,s,t[s]);if(w)for(var s of w(t))A.call(t,s)&&F(r,s,t[s]);return r},h=(r,t)=>y(r,k(t));import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";import{d as B,a as E,r as L,w as N,n as D,l as Y,I as T,o as n,e as l,B as C,x,m as b,z as g,u as i,J as O,f as P,A as $,F as U,v as R}from"./@vue.fb42abb7.js";const z={class:"component theme"},J={class:"pull"},Q={name:"g-refersh"},V=B(h(v({},Q),{props:{height:{default:"100%"}},emits:["dropDown","pullUp"],setup(r,{expose:t,emit:s}){const f=r,a=E(),e=L({moveY:0,startY:0,pullFlag:0,bottomPx:30,referFlag:0,referHeight:0,isMobile:!0,trueFlag:!1,isLoading:!0});N(()=>e.isLoading,(o,p)=>{p===!1&&o===!0&&D(()=>{u()})},{deep:!0}),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?e.isMobile=!0:e.isMobile=!1,Y(()=>{window.addEventListener("mouseup",m),window.addEventListener("mousemove",d),window.addEventListener("mousedown",c),window.addEventListener("touchend",m,{passive:!1}),window.addEventListener("touchmove",d,{passive:!1}),window.addEventListener("touchstart",c,{passive:!1}),u()});const u=()=>{D(()=>{a.value.scrollHeight-a.value.scrollTop-5<=a.value.clientHeight&&_()})},c=o=>{o=o||window.event,a.value.contains(o.target)&&(e.startY=e.isMobile?o.touches[0].pageY:o.pageY,e.trueFlag=!0)},d=o=>{if(o=o||window.event,!a.value.contains(o.target))return;a.value.scrollTop<1&&e.trueFlag&&(e.moveY=(e.isMobile?o.touches[0].pageY:o.pageY)-e.startY,e.referHeight=e.moveY,e.moveY>0&&(o.preventDefault(),e.moveY>80&&(e.referHeight=80,e.referFlag=1)))},m=()=>{e.trueFlag=!1,e.moveY>0&&(e.referFlag=2,s("dropDown"))},_=()=>{e.isLoading&&(e.isLoading=!1,s("pullUp"))};return t({noMoreData:()=>{e.pullFlag=1},pullSuccess:()=>{e.pullFlag=0,e.isLoading=!0,e.referFlag=3,e.referHeight=0,u()},loadmoreSuccess:()=>{e.isLoading=!0}}),(o,p)=>{const M=T("loadmores");return n(),l("div",z,[C((n(),l("div",{ref_key:"box",ref:a,class:"box",style:x(`height: ${f.height};`)},[b("div",{style:x(`height: ${i(e).referHeight}px;`),class:"refersh"},g(i(e).referFlag===1?"\u677E\u5F00\u624B\u6307\u5373\u53EF\u5237\u65B0":i(e).referFlag===2?"\u6B63\u5728\u52A0\u8F7D\u4E2D...":"\u5237\u65B0\u6210\u529F"),5),O(o.$slots,"default",{},void 0,!0),b("div",J,g(i(e).pullFlag===1?"\u6CA1\u6709\u66F4\u591A\u4E86":"\u52A0\u8F7D\u4E2D..."),1)],4)),[[M,_]])])}}}));var W=I(V,[["__scopeId","data-v-432053e2"]]);const G={class:"contanir theme"},j={name:"refersh"},se=B(h(v({},j),{setup(r){const t=E(),s=L({list:[1,2,3,4,5,6,7,8,9,10]});Y(()=>{});const f=()=>{setTimeout(()=>{s.list=[1,2,3,4,5,6,7,8,9,10],t.value.pullSuccess()},1e3)},a=()=>{s.list=[...s.list,1,2,3,4,5,6,7,8,9,10],setTimeout(()=>{s.list.length>50?t.value.noMoreData():t.value.loadmoreSuccess()},1e3)};return(e,u)=>(n(),l("div",G,[P(W,{ref_key:"refershRef",ref:t,height:"500px",onDropDown:f,onPullUp:a},{default:$(()=>[(n(!0),l(U,null,R(i(s).list,(c,d)=>(n(),l("div",{key:d},g(c),1))),128))]),_:1},512)]))}}));export{se as default};

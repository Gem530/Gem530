var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(t,s,o)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o,l=(e,t)=>{for(var s in t||(t={}))r.call(t,s)&&i(e,s,t[s]);if(o)for(var s of o(t))a.call(t,s)&&i(e,s,t[s]);return e},n=(e,o)=>t(e,s(o));import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";import{d,a as p,r as c,w as g,n as v,l as f,I as h,o as m,e as w,B as b,x as F,m as y,z as Y,u as L,J as O,f as P,A as M,F as x,v as j}from"./@vue.fb42abb7.js";const D={class:"component theme"},E={class:"pull"};var S=u(d(n(l({},{name:"g-refersh"}),{props:{height:{default:"100%"}},emits:["dropDown","pullUp"],setup(e,{expose:t,emit:s}){const o=e,r=p(),a=c({moveY:0,startY:0,pullFlag:0,bottomPx:30,referFlag:0,referHeight:0,isMobile:!0,trueFlag:!1,isLoading:!0});g((()=>a.isLoading),((e,t)=>{!1===t&&!0===e&&v((()=>{i()}))}),{deep:!0}),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?a.isMobile=!0:a.isMobile=!1,f((()=>{window.addEventListener("mouseup",u),window.addEventListener("mousemove",n),window.addEventListener("mousedown",l),window.addEventListener("touchend",u,{passive:!1}),window.addEventListener("touchmove",n,{passive:!1}),window.addEventListener("touchstart",l,{passive:!1}),i()}));const i=()=>{v((()=>{r.value.scrollHeight-r.value.scrollTop-5<=r.value.clientHeight&&d()}))},l=e=>{e=e||window.event,r.value.contains(e.target)&&(a.startY=a.isMobile?e.touches[0].pageY:e.pageY,a.trueFlag=!0)},n=e=>{if(e=e||window.event,!r.value.contains(e.target))return;r.value.scrollTop<1&&a.trueFlag&&(a.moveY=(a.isMobile?e.touches[0].pageY:e.pageY)-a.startY,a.referHeight=a.moveY,a.moveY>0&&(e.preventDefault(),a.moveY>80&&(a.referHeight=80,a.referFlag=1)))},u=()=>{a.trueFlag=!1,a.moveY>0&&(a.referFlag=2,s("dropDown"))},d=()=>{a.isLoading&&(a.isLoading=!1,s("pullUp"))};return t({noMoreData:()=>{a.pullFlag=1},pullSuccess:()=>{a.pullFlag=0,a.isLoading=!0,a.referFlag=3,a.referHeight=0,i()},loadmoreSuccess:()=>{a.isLoading=!0}}),(e,t)=>{const s=h("loadmores");return m(),w("div",D,[b((m(),w("div",{ref_key:"box",ref:r,class:"box",style:F(`height: ${o.height};`)},[y("div",{style:F(`height: ${L(a).referHeight}px;`),class:"refersh"},Y(1===L(a).referFlag?"松开手指即可刷新":2===L(a).referFlag?"正在加载中...":"刷新成功"),5),O(e.$slots,"default",{},void 0,!0),y("div",E,Y(1===L(a).pullFlag?"没有更多了":"加载中..."),1)],4)),[[s,d]])])}}})),[["__scopeId","data-v-432053e2"]]);const H={class:"contanir theme"},_=d(n(l({},{name:"refersh"}),{setup(e){const t=p(),s=c({list:[1,2,3,4,5,6,7,8,9,10]});f((()=>{}));const o=()=>{setTimeout((()=>{s.list=[1,2,3,4,5,6,7,8,9,10],t.value.pullSuccess()}),1e3)},r=()=>{s.list=[...s.list,1,2,3,4,5,6,7,8,9,10],setTimeout((()=>{s.list.length>50?t.value.noMoreData():t.value.loadmoreSuccess()}),1e3)};return(e,a)=>(m(),w("div",H,[P(S,{ref_key:"refershRef",ref:t,height:"500px",onDropDown:o,onPullUp:r},{default:M((()=>[(m(!0),w(x,null,j(L(s).list,((e,t)=>(m(),w("div",{key:t},Y(e),1)))),128))])),_:1},512)]))}}));export{_ as default};

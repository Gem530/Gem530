var k=Object.defineProperty,S=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var v=(s,e,o)=>e in s?k(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,p=(s,e)=>{for(var o in e||(e={}))E.call(e,o)&&v(s,o,e[o]);if(F)for(var o of F(e))I.call(e,o)&&v(s,o,e[o]);return s},_=(s,e)=>S(s,w(e));import{d as C,a as b,w as N,o as A,e as x,n as O,r as P,l as M,m as n,B as h,O as g,u as d,f as U,y as V,E as G,G as H}from"./@vue.fb42abb7.js";import{u as J}from"./vuex.98bef695.js";import{u as T}from"./vue-router.976535db.js";import{i as $}from"./index.6f7a580a.js";import{l as z,r as L}from"./index.b27fe81c.js";import{_ as B}from"./plugin-vue_export-helper.21dcd24c.js";import{G as c}from"./index.67903aaa.js";import"./vuex-persistedstate.fa252374.js";import"./axios.e7b69eb3.js";const R=["width","height"],j={name:"g-code"},q=C(_(p({},j),{props:{w:{default:320},h:{default:150},num:{default:"1000"}},setup(s){const e=s,o=b();N(()=>e.num,(u,r)=>{O(()=>{t()})},{deep:!0,immediate:!0});const t=()=>{var u=o.value,r=u.getContext("2d");r.clearRect(0,0,u.width,u.height);const l=u.height/2;r.font=l+"px bold \u9ED1\u4F53",r.fillStyle="#fff",r.textAlign="center",r.textBaseline="middle",r.fillText(e.num,u.width/2,u.height/2)};return(u,r)=>(A(),x("canvas",{ref_key:"loginCheckout",ref:o,width:e.w,height:e.h},"\u5F53\u524D\u6D4F\u89C8\u5668\u4E0D\u652F\u6301canvas\uFF0C\u8BF7\u66F4\u6362\u6D4F\u89C8\u5668\u540E\u518D\u8BD5",8,R))}}));var K=B(q,[["__scopeId","data-v-2c5d53cc"]]);const f=s=>(G("data-v-e2a11210"),s=s(),H(),s),Q={class:"contanir theme"},W=f(()=>n("div",{class:"login-title"},"LOGIN",-1)),X={class:"form-input"},Y=f(()=>n("span",null,"\u8D26 \u53F7\uFF1A",-1)),Z={class:"form-input"},ee=f(()=>n("span",null,"\u5BC6 \u7801\uFF1A",-1)),te={class:"form-input code"},se={name:"login"},oe=C(_(p({},se),{setup(s){const e=J(),o=T(),t=P({num:"",name:"admin",pass:"admin",code:""}),u=/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent);e.dispatch("setBaseAction",{isPc:!u}),M(()=>{});const r=()=>{t.num=Math.floor(Math.random()*(9999-1e3+1)+1e3),t.code=t.num};r();const l=()=>{if(t.name){if(!t.pass)return"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"}else return"\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A";return t.code.toString()!==t.num.toString()?"\u9A8C\u8BC1\u7801\u4E0D\u4E00\u81F4":!0},y=()=>{if(l()!==!0)return c({message:l(),type:"error",duration:1500}),!1;if(u){const m={name:t.name,pass:t.pass};z(m).then(a=>{c({message:"\u767B\u5F55\u6210\u529F",type:"success",duration:2e3}),console.log(a);const i=a.data[0];e.dispatch("setUserAction",{name:t.name,avator:i.avator,userId:i.Id}),$(),sessionStorage.setItem("token",JSON.stringify(a.token)),o.push("/chat")}).catch(a=>{c({message:"\u767B\u5F55\u5931\u8D25\uFF1A"+a.message,type:"error",duration:2e3})})}else e.dispatch("setUserAction",{name:"admin",avator:"",userId:0}),sessionStorage.setItem("token","is-token"),o.push("/index")},D=()=>{const m={name:t.name,pass:t.pass};L(JSON.parse(JSON.stringify(m))).then(a=>{c({message:a.message,type:"success",duration:2e3})}).catch(a=>{c({message:"\u6CE8\u518C\u5931\u8D25\uFF1A"+a.message,type:"error",duration:2e3})})};return(m,a)=>(A(),x("div",Q,[n("div",{class:V(["box",{"box-mobile":!d(e).getters.base.isPc}])},[W,n("div",X,[Y,h(n("input",{type:"text",placeholder:"\u8D26\u53F7\uFF1Aadmin","onUpdate:modelValue":a[0]||(a[0]=i=>d(t).name=i)},null,512),[[g,d(t).name]])]),n("div",Z,[ee,h(n("input",{type:"password",placeholder:"\u5BC6\u7801\uFF1Aadmin","onUpdate:modelValue":a[1]||(a[1]=i=>d(t).pass=i)},null,512),[[g,d(t).pass]])]),n("div",te,[h(n("input",{type:"text",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801","onUpdate:modelValue":a[2]||(a[2]=i=>d(t).code=i)},null,512),[[g,d(t).code]]),U(K,{num:d(t).num,w:60,h:30,onClick:r},null,8,["num"])]),n("button",{onClick:y},"\u767B\u5F55"),n("button",{onClick:D},"\u6CE8\u518C")],2)]))}}));var _e=B(oe,[["__scopeId","data-v-e2a11210"]]);export{_e as default};

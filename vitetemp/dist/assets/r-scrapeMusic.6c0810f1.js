var T=Object.defineProperty,k=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var x=(l,a,n)=>a in l?T(l,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[a]=n,d=(l,a)=>{for(var n in a||(a={}))R.call(a,n)&&x(l,n,a[n]);if(_)for(var n of _(a))S.call(a,n)&&x(l,n,a[n]);return l},g=(l,a)=>k(l,P(a));import{d as b,a as m,l as y,o as A,e as B,v as C,B as L,f as E}from"./@vue.10c5446f.js";const I=["src"],M={name:"g-scrape-music"},X=b(g(d({},M),{props:{url:{default:""},width:{default:"300px"},height:{default:"300px"},maxArea:{default:30}},emits:["getResult"],setup(l,{emit:a}){const n=l,h=m(),i=m();let p=m(!0);navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?p.value=!0:p.value=!1,y(()=>{i.value.readyState==="complete"?v():i.value.onload=function(){v()}});const v=()=>{const e=document.createElement("canvas");e.width=i.value.width,e.height=i.value.height,e.style.position="absolute",e.style.zIndex=2,e.style.left=i.value.offsetLeft+"px",e.style.top=i.value.offsetTop+"px",i.value.parentNode.insertBefore(e,i.value);let t=e.getContext("2d");t.fillStyle="#bbb",t.fillRect(0,0,i.value.width,i.value.height),t.globalCompositeOperation="destination-out",t.strokeStyle="#eee",t.lineWidth=30,t.lineCap="round";const c=h.value.getBoundingClientRect().top,r=h.value.getBoundingClientRect().left;p.value?e.ontouchstart=function(s){let f=s.touches[0].pageX-e.offsetLeft-r,u=s.touches[0].pageY-e.offsetTop-c;t.beginPath(),t.arc(f,u,15,0,6.3,!1),t.fill(),e.ontouchmove=function(o){o=o||window.event,o.preventDefault(),t.beginPath(),t.moveTo(f,u),t.lineTo(o.touches[0].pageX-e.offsetLeft-r,o.touches[0].pageY-e.offsetTop-c),f=o.touches[0].pageX-e.offsetLeft-r,u=o.touches[0].pageY-e.offsetTop-c,t.stroke()},document.ontouchend=function(){e.onmousemove=null,this.onmouseup=null,w()}}:e.onmousedown=function(s){s=s||window.event;let f=s.pageX-e.offsetLeft-r,u=s.pageY-e.offsetTop-c;t.beginPath(),t.arc(f,u,15,0,6.3,!1),t.fill(),e.onmousemove=function(o){o=o||window.event,o.preventDefault(),t.beginPath(),t.moveTo(f,u),t.lineTo(o.pageX-e.offsetLeft-r,o.pageY-e.offsetTop-c),f=o.pageX-e.offsetLeft-r,u=o.pageY-e.offsetTop-c,t.stroke()},document.onmouseup=function(){e.onmousemove=null,this.onmouseup=null,w()}};const w=()=>{let s=t.getImageData(0,0,e.width,e.height).data,f=0;for(let o=0;o<s.length;o+=4)s[o]==0&&s[o+1]==0&&s[o+2]==0&&s[o+3]==0&&f++;let u=f*100/(e.width*e.height);u>n.maxArea&&(t.beginPath(),t.fillRect(0,0,e.width,e.height)),a("getResult",{currentArea:u,isSuccess:u>n.maxArea})}};return(e,t)=>(A(),B("div",{class:"component theme",ref_key:"box",ref:h},[C("img",{ref_key:"oImg",ref:i,src:n.url,style:L(`width: ${n.width};height: ${n.height};`)},null,12,I)],512))}})),Y={class:"contanir theme"},$={name:"scrapeMusic"},D=b(g(d({},$),{setup(l){y(()=>{});const a=n=>{console.log("getResult",n)};return(n,h)=>(A(),B("div",Y,[E(X,{url:"https://d1.faiusr.com/4/AAEIABAEGAAgtZ-56QUoufyr5gQw9gE4kwM.png",width:"300px",height:"400px",maxArea:20,onGetResult:a})]))}}));export{D as default};

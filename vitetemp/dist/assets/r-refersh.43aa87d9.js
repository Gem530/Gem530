var S=Object.defineProperty,Y=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var F=(r,t,o)=>t in r?S(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o,g=(r,t)=>{for(var o in t||(t={}))C.call(t,o)&&F(r,o,t[o]);if(w)for(var o of w(t))H.call(t,o)&&F(r,o,t[o]);return r},h=(r,t)=>Y(r,k(t));import{_ as N}from"./index.be58f898.js";import{d as x,a as L,r as B,w as O,y as M,n as D,P,o as i,g as l,L as T,q as E,l as b,t as v,u as n,O as A,x as I,C as $,F as U,j as R}from"./@vue.a7176b8e.js";import"./vuex.5b78a150.js";import"./vue-router.760322c3.js";import"./vuex-persistedstate.fa252374.js";const Q={class:"component theme"},V={class:"pull"},W={name:"g-refersh"},j=x(h(g({},W),{props:{height:{default:"100%"}},emits:["dropDown","pullUp"],setup(r,{expose:t,emit:o}){const p=r,a=L(),e=B({moveY:0,startY:0,pullFlag:0,bottomPx:30,referFlag:0,referHeight:0,isMobile:!0,trueFlag:!1,isLoading:!0});O(()=>e.isLoading,(s,f)=>{f===!1&&s===!0&&D(()=>{u()})},{deep:!0}),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?e.isMobile=!0:e.isMobile=!1,M(()=>{window.addEventListener("mouseup",m),window.addEventListener("mousemove",d),window.addEventListener("mousedown",c),window.addEventListener("touchend",m,{passive:!1}),window.addEventListener("touchmove",d,{passive:!1}),window.addEventListener("touchstart",c,{passive:!1}),u()});const u=()=>{D(()=>{a.value.scrollHeight-a.value.scrollTop-5<=a.value.clientHeight&&_()})},c=s=>{s=s||window.event,a.value.contains(s.target)&&(e.startY=e.isMobile?s.touches[0].pageY:s.pageY,e.trueFlag=!0)},d=s=>{if(s=s||window.event,!a.value.contains(s.target))return;a.value.scrollTop<1&&e.trueFlag&&(e.moveY=(e.isMobile?s.touches[0].pageY:s.pageY)-e.startY,e.moveY>0&&(s.preventDefault(),e.referFlag=1,e.moveY>80&&(e.referHeight=80)))},m=()=>{e.trueFlag=!1,e.moveY>0&&(e.referFlag=2,o("dropDown"))},_=()=>{e.isLoading&&(e.isLoading=!1,o("pullUp"))};return t({noMoreData:()=>{e.pullFlag=1},pullSuccess:()=>{e.pullFlag=0,e.isLoading=!0,e.referFlag=3,e.referHeight=0,u()},loadmoreSuccess:()=>{e.isLoading=!0}}),(s,f)=>{const y=P("loadmores");return i(),l("div",Q,[T((i(),l("div",{ref_key:"box",ref:a,class:"box",style:E(`height: ${p.height};`)},[b("div",{style:E(`height: ${n(e).referHeight}px;`),class:"refersh"},v(n(e).referFlag===1?"\u677E\u5F00\u624B\u6307\u5373\u53EF\u5237\u65B0":n(e).referFlag===2?"\u6B63\u5728\u52A0\u8F7D\u4E2D...":"\u5237\u65B0\u6210\u529F"),5),A(s.$slots,"default",{},void 0,!0),b("div",V,v(n(e).pullFlag===1?"\u6CA1\u6709\u66F4\u591A\u4E86":"\u52A0\u8F7D\u4E2D..."),1)],4)),[[y,_]])])}}}));var q=N(j,[["__scopeId","data-v-2a3b3758"]]);const z={class:"contanir theme"},G={name:"refersh"},ae=x(h(g({},G),{setup(r){const t=L(),o=B({list:[1,2,3,4,5,6,7,8,9,10]});M(()=>{console.log("onMounted")});const p=()=>{setTimeout(()=>{console.log("\u4E0B\u62C9\u6210\u529F"),o.list=[1,2,3,4,5,6,7,8,9,10],t.value.pullSuccess()},1e3)},a=()=>{console.log("\u89E6\u5E95\u6210\u529F"),o.list=[...o.list,1,2,3,4,5,6,7,8,9,10],setTimeout(()=>{o.list.length>50?t.value.noMoreData():t.value.loadmoreSuccess()},100)};return(e,u)=>(i(),l("div",z,[I(q,{ref_key:"refershRef",ref:t,height:"500px",onDropDown:p,onPullUp:a},{default:$(()=>[(i(!0),l(U,null,R(n(o).list,(c,d)=>(i(),l("div",{key:d},v(c),1))),128))]),_:1},512)]))}}));export{ae as default};
